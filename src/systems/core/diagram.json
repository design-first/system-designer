{
  "name": "diagram",
  "master": true,
  "version": "1.0.0",
  "description": "",
  "schemas": {
    "104ad1f48518376": {
      "_id": "104ad1f48518376",
      "_name": "_Channel",
      "_inherit": ["_Component"],
      "$editorUpdateSystem": "event",
      "$editorUpdateSchema": "event",
      "$editorUpdateSchemaId": "event",
      "$editorUpdateSchemaName": "event",
      "$editorUpdateModel": "event",
      "$editorUpdateModelId": "event",
      "$editorUpdateType": "event",
      "$editorDeleteType": "event",
      "$editorUpdateBehavior": "event",
      "$editorDeleteBehavior": "event",
      "$editorUpdateComponent": "event",
      "$editorUpdateComponentId": "event",
      "$editorDeleteComponent": "event",
      "$appLogDebug": "event",
      "$appLogInfo": "event",
      "$appLogWarn": "event",
      "$appLogError": "event",
      "$appLoadSystem": "event",
      "$designerSync": "event",
      "$designerCreateBehavior": "event",
      "$designerCreateComponent": "event",
      "$designerCreateType": "event",
      "$designerCreateSchema": "event",
      "$designerCreateModel": "event",
      "$designerDeleteSchema": "event",
      "$designerDeleteModel": "event",
      "$designerDeleteType": "event",
      "$designerDeleteBehavior": "event",
      "$designerDeleteComponent": "event",
      "$designerUpdateComponent": "event",
      "$designerUpdateModel": "event",
      "$designerUpdateBehavior": "event",
      "$runtimeCreateComponent": "event",
      "$runtimeDeleteComponent": "event",
      "$runtimeUpdateComponent": "event",
      "send": "event"
    },
    "z1e592183e81ce64": {
      "_id": "z1e592183e81ce64",
      "_name": "Router",
      "_inherit": ["_Component"],
      "start": "method",
      "update": "method"
    },
    "t19b6b11ff31158d": {
      "_name": "ToolBarItem",
      "html": "link",
      "position": "property",
      "type": "property",
      "render": "method",
      "click": "event",
      "_id": "t19b6b11ff31158d",
      "_inherit": ["_Component"],
      "platform": "property"
    },
    "p1f6f51d9f111925": {
      "_name": "MenuAction",
      "html": "link",
      "position": "property",
      "type": "property",
      "hide": "method",
      "show": "method",
      "render": "method",
      "_id": "p1f6f51d9f111925",
      "_inherit": ["_Component"]
    },
    "t14a79156a81862a": {
      "_name": "MenuHeader",
      "html": "link",
      "type": "property",
      "hide": "method",
      "show": "method",
      "render": "method",
      "_id": "t14a79156a81862a",
      "_inherit": ["_Component"]
    },
    "l1d113198721599d": {
      "_name": "MenuItem",
      "html": "link",
      "position": "property",
      "type": "property",
      "name": "property",
      "platform": "property",
      "render": "method",
      "click": "event",
      "_id": "l1d113198721599d",
      "_inherit": ["_Component"]
    },
    "f1092816b571e03c": {
      "_name": "Workspace",
      "create": "method",
      "load": "method",
      "clear": "method",
      "render": "method",
      "_id": "f1092816b571e03c",
      "_inherit": ["_Component"]
    },
    "o1ead8184af1a83e": {
      "_name": "Designer",
      "_inherit": ["_Component"],
      "version": "property",
      "runWindow": "property",
      "debugWindow": "property",
      "linkModel": "method",
      "save": "method",
      "saveCordova": "method",
      "saveAs": "method",
      "welcome": "method",
      "open": "method",
      "render": "event",
      "isCordova": "method",
      "isElectron": "method",
      "updateCordovaContext": "method",
      "runMessages": "method",
      "installExtensions": "method",
      "isMac": "method",
      "addShortcuts": "method",
      "_id": "o1ead8184af1a83e"
    },
    "v123b51abbb18712": {
      "_id": "v123b51abbb18712",
      "_name": "Diagram",
      "_inherit": ["_Component"],
      "ref": "property",
      "zoom": "property",
      "render": "method"
    }
  },
  "models": {
    "135c71078810af2": {
      "_id": "135c71078810af2",
      "_name": "_Channel",
      "$editorUpdateSchemaName": {
        "params": [
          { "name": "name", "type": "string" },
          { "name": "id", "type": "string" }
        ]
      },
      "$designerSync": {},
      "$appLoadSystem": { "params": [{ "name": "system", "type": "object" }] },
      "$designerCreateBehavior": {
        "params": [{ "name": "behavior", "type": "object" }]
      },
      "$editorUpdateBehavior": {
        "params": [
          { "name": "id", "type": "string" },
          { "name": "behavior", "type": "object" }
        ]
      },
      "$designerUpdateBehavior": {
        "params": [
          { "name": "id", "type": "string" },
          { "name": "behavior", "type": "object" }
        ]
      },
      "$editorDeleteBehavior": {
        "params": [{ "name": "id", "type": "string" }]
      },
      "$designerDeleteBehavior": {
        "params": [{ "name": "id", "type": "string" }]
      },
      "$designerCreateComponent": {
        "params": [
          { "name": "collection", "type": "string" },
          { "name": "component", "type": "object" }
        ]
      },
      "$editorUpdateComponent": {
        "params": [
          { "name": "id", "type": "string" },
          { "name": "collection", "type": "string" },
          { "name": "component", "type": "object" }
        ]
      },
      "$editorUpdateComponentId": {
        "params": [
          { "name": "oldId", "type": "string" },
          { "name": "newId", "type": "string" },
          { "name": "collection", "type": "string" }
        ]
      },
      "$designerUpdateComponent": {
        "params": [
          { "name": "id", "type": "string" },
          { "name": "collection", "type": "string" },
          { "name": "component", "type": "object" }
        ]
      },
      "$editorDeleteComponent": {
        "params": [
          { "name": "id", "type": "string" },
          { "name": "collection", "type": "string" }
        ]
      },
      "$designerDeleteComponent": {
        "params": [
          { "name": "id", "type": "string" },
          { "name": "collection", "type": "string" }
        ]
      },
      "$designerCreateType": {
        "params": [
          { "name": "id", "type": "string" },
          { "name": "type", "type": "object" }
        ]
      },
      "$editorUpdateType": {
        "params": [
          { "name": "id", "type": "string" },
          { "name": "type", "type": "object" }
        ]
      },
      "$editorDeleteType": { "params": [{ "name": "id", "type": "string" }] },
      "$designerCreateSchema": {
        "params": [
          { "name": "id", "type": "string" },
          { "name": "schema", "type": "object" }
        ]
      },
      "$editorUpdateSchema": {
        "params": [
          { "name": "id", "type": "string" },
          { "name": "schema", "type": "object" }
        ]
      },
      "$editorUpdateSchemaId": {
        "params": [
          { "name": "oldId", "type": "string" },
          { "name": "newId", "type": "string" }
        ]
      },
      "$designerDeleteSchema": {
        "params": [{ "name": "id", "type": "string" }]
      },
      "$designerCreateModel": {
        "params": [
          { "name": "id", "type": "string" },
          { "name": "model", "type": "object" }
        ]
      },
      "$editorUpdateModel": {
        "params": [
          { "name": "id", "type": "string" },
          { "name": "model", "type": "object" }
        ]
      },
      "$designerUpdateModel": {
        "params": [
          { "name": "id", "type": "string" },
          { "name": "model", "type": "object" }
        ]
      },
      "$editorUpdateModelId": {
        "params": [
          { "name": "oldId", "type": "string" },
          { "name": "newId", "type": "string" }
        ]
      },
      "$designerDeleteModel": {
        "params": [{ "name": "id", "type": "string" }]
      },
      "$designerDeleteType": { "params": [{ "name": "id", "type": "string" }] },
      "$editorUpdateSystem": {
        "params": [
          { "name": "id", "type": "string" },
          { "name": "system", "type": "object" }
        ]
      },
      "$appLogDebug": { "params": [{ "name": "message", "type": "string" }] },
      "$appLogInfo": { "params": [{ "name": "message", "type": "string" }] },
      "$appLogWarn": { "params": [{ "name": "message", "type": "string" }] },
      "$appLogError": { "params": [{ "name": "message", "type": "string" }] },
      "$runtimeCreateComponent": {
        "params": [
          { "name": "collection", "type": "string" },
          { "name": "component", "type": "object" }
        ]
      },
      "$runtimeDeleteComponent": {
        "params": [
          { "name": "id", "type": "string" },
          { "name": "collection", "type": "string" }
        ]
      },
      "$runtimeUpdateComponent": {
        "params": [
          { "name": "id", "type": "string" },
          { "name": "collection", "type": "string" },
          { "name": "field", "type": "string" },
          { "name": "value", "type": "any" }
        ]
      },
      "send": { "params": [{ "name": "message", "type": "message" }] }
    },
    "c1b00612faf188cf": {
      "_id": "c1b00612faf188cf",
      "_name": "Router",
      "start": {},
      "update": {}
    },
    "u1f4c7177bb1a459": {
      "_name": "ToolBarItem",
      "html": {
        "type": "HTML",
        "readOnly": false,
        "mandatory": false,
        "default": ""
      },
      "position": {
        "type": "number",
        "readOnly": false,
        "mandatory": false,
        "default": 0
      },
      "type": {
        "type": "editorType",
        "readOnly": false,
        "mandatory": false,
        "default": "designer"
      },
      "render": {},
      "click": {},
      "_id": "u1f4c7177bb1a459",
      "platform": {
        "type": "platform",
        "readOnly": false,
        "mandatory": false,
        "default": "all"
      }
    },
    "w124ac16b591df57": {
      "_name": "MenuAction",
      "html": {
        "type": "HTML",
        "readOnly": false,
        "mandatory": false,
        "default": ""
      },
      "position": {
        "type": "number",
        "readOnly": false,
        "mandatory": false,
        "default": 0
      },
      "type": {
        "type": "editorType",
        "readOnly": false,
        "mandatory": false,
        "default": "designer"
      },
      "hide": {},
      "show": {},
      "render": {},
      "_id": "w124ac16b591df57"
    },
    "f13ebe1ad331b263": {
      "_name": "MenuHeader",
      "html": {
        "type": "HTML",
        "readOnly": false,
        "mandatory": false,
        "default": ""
      },
      "type": {
        "type": "editorType",
        "readOnly": false,
        "mandatory": false,
        "default": "designer"
      },
      "hide": {},
      "show": {},
      "render": {},
      "_id": "f13ebe1ad331b263"
    },
    "u1f9a01abe31b3bf": {
      "_id": "u1f9a01abe31b3bf",
      "_name": "MenuItem",
      "html": {
        "type": "HTML",
        "readOnly": false,
        "mandatory": false,
        "default": ""
      },
      "position": {
        "type": "number",
        "readOnly": false,
        "mandatory": false,
        "default": 0
      },
      "type": {
        "type": "editorType",
        "readOnly": false,
        "mandatory": false,
        "default": "designer"
      },
      "name": {
        "type": "string",
        "readOnly": false,
        "mandatory": false,
        "default": ""
      },
      "platform": {
        "type": "platform",
        "readOnly": false,
        "mandatory": false,
        "default": "all"
      },
      "render": {},
      "click": {}
    },
    "v1435e1809e10be7": {
      "_id": "v1435e1809e10be7",
      "_name": "Workspace",
      "create": {},
      "load": {},
      "clear": {},
      "render": {}
    },
    "q129be1c61b18285": {
      "_id": "q129be1c61b18285",
      "_name": "Designer",
      "version": {
        "type": "string",
        "readOnly": false,
        "mandatory": false,
        "default": "3.0.4"
      },
      "runWindow": {
        "type": "object",
        "readOnly": false,
        "mandatory": false,
        "default": null
      },
      "debugWindow": {
        "type": "object",
        "readOnly": false,
        "mandatory": false,
        "default": null
      },
      "linkModel": {
        "params": [
          {
            "name": "source",
            "type": "string",
            "mandatory": false,
            "default": ""
          },
          {
            "name": "target",
            "type": "string",
            "mandatory": false,
            "default": ""
          }
        ]
      },
      "save": {},
      "saveCordova": {},
      "saveAs": {
        "params": [
          {
            "name": "data",
            "type": "object",
            "mandatory": false,
            "default": {}
          },
          {
            "name": "fileName",
            "type": "string",
            "mandatory": false,
            "default": ""
          }
        ]
      },
      "welcome": {},
      "open": {
        "params": [
          {
            "name": "url",
            "type": "string",
            "mandatory": false,
            "default": ""
          },
          {
            "name": "target",
            "type": "string",
            "mandatory": false,
            "default": ""
          },
          {
            "name": "isExt",
            "type": "boolean",
            "mandatory": false,
            "default": false
          }
        ]
      },
      "render": {},
      "isCordova": { "result": "boolean" },
      "isElectron": { "result": "boolean" },
      "updateCordovaContext": {},
      "runMessages": {
        "params": [
          {
            "name": "messages",
            "type": "array",
            "mandatory": true,
            "default": []
          }
        ]
      },
      "installExtensions": {},
      "isMac": { "result": "boolean" },
      "addShortcuts": {}
    },
    "b169321637f19101": {
      "_id": "b169321637f19101",
      "_name": "Diagram",
      "_description": "",
      "ref": {
        "description": "",
        "type": "any",
        "readOnly": false,
        "mandatory": false,
        "default": ""
      },
      "zoom": {
        "description": "",
        "type": "number",
        "readOnly": false,
        "mandatory": false,
        "default": 1
      },
      "render": {
        "description": "",
        "params": [
          {
            "name": "dotFile",
            "description": "",
            "type": "any",
            "mandatory": false,
            "default": null
          }
        ],
        "result": "any"
      }
    }
  },
  "behaviors": {
    "f14706139781d16b": {
      "_id": "f14706139781d16b",
      "component": "a1e94f187c412b2a",
      "state": "click",
      "action": "function click() {\n  $('#designer-toolbar-item-copyright').tooltip('hide');\n  if ($('#designer-dialog').children().length) {\n    $('#' + $(\"#designer-dialog\").children()[0].id).removeClass('fade').modal('hide');\n  }\n  \n  var DialogCopyright = this.require('DialogCopyright');\n  var message = this.require('copyright.html');\n  \n  DialogCopyright = new DialogCopyright({\n    'title': 'System Designer',\n    'message': message.source().replace('{{version}}', this.require('designer').version())\n  });\n  DialogCopyright.show();\n  DialogCopyright.on('ok', function () {\n    this.hide();\n  });\n}"
    },
    "b18fab15f501e117": {
      "_id": "b18fab15f501e117",
      "component": "Workspace",
      "state": "render",
      "action": "function render() { \n  this.require('viz').render();\n}",
      "useCoreAPI": false,
      "core": false
    },
    "b105d21fac11b017": {
      "_id": "b105d21fac11b017",
      "component": "Designer",
      "state": "render",
      "action": "function render() {\n  var id = '',\n    systemId = '',\n    system = null;\n  \n  // type\n  this.require('state').type(window.location.href.split('.html')[0].split('/')[window.location.href.split('.html')[0].split('/').length - 1]);\n\n  // get parameters\n  systemId = document.location.href.split('#')[1].split('?')[0];\n  \n  // set system\n  system = this.require('storage').get(systemId);\n  \n  if (system) {\n    this.require('factory').create(system);\n  }\n\n  if (this.isCordova()) {\n    this.updateCordovaContext();\n  }\n\n  // render\n  this.require('menubar').render();\n  this.require('toolbar').render();\n  this.require('workspace').render();\n  \n  // extensions\n  this.installExtensions();\n  \n  // title\n  if (system) {\n    document.title = 'class diagram Â· system ' + system.name;\n  } else {\n    document.title = 'class diagram';\n  }\n\n  // router\n  this.require('router').update();\n  \n  // shorcuts\n  this.addShortcuts();\n}",
      "useCoreAPI": false,
      "core": false
    },
    "k171ad182081ca3c": {
      "_id": "k171ad182081ca3c",
      "component": "a1c33618ac01371c",
      "state": "start",
      "action": "function start() { \n  this.require('designer').render();\n}",
      "useCoreAPI": false,
      "core": false
    },
    "q16ab5185c81f37d": {
      "_id": "q16ab5185c81f37d",
      "component": "Router",
      "state": "update",
      "action": "function update() { \n  var menubar = [],\n    i = 0,\n    length = 0,\n    id = '',\n    href = '';\n\n  id = decodeURIComponent(document.location.href.split('#')[1]);\n\n  // update menubar\n  menubar = $('#designer-menubar-items > li > a');\n  length = menubar.length;\n  for (i = 0; i < length; i++) {\n    href = menubar[i].href;\n    context = href.split('#')[href.split('#').length - 1];\n    menubar[i].href = '#' + id + '#' + context;\n  }\n}",
      "useCoreAPI": false,
      "core": false
    },
    "t1e0be117b312cf0": {
      "_id": "t1e0be117b312cf0",
      "component": "_Channel",
      "state": "send",
      "action": "function send(message) { \n  if (message.event.indexOf('$system') !== 0) {\n    var config = this.require('storage').get('system-designer-config'),\n      designer = this.require('designer'),\n      state = this.require('state'),\n      system = {};\n      \n    if (designer.isCordova()) {\n      state.messages().push(message);\n    }\n\n    this.require('storage').set('system-designer-message', message);\n\n    // message for server debug\n    if (typeof config !== 'undefined' && typeof config.debugType !== 'undefined' && config.debugType === 'server' && config.urlServer) {\n      $.post(config.urlServer.replace(':8888', '') + ':8888/' + message.event, encodeURIComponent(JSON.stringify(message.data)));\n    }\n  }\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "i12aee1bd7815e89": {
      "_id": "i12aee1bd7815e89",
      "component": "_Channel",
      "state": "init",
      "action": "function init(conf) { \n  this.require('_Storage').on('changed', function (obj) {\n    if (typeof obj['system-designer-message'] !== 'undefined') {\n      $db._Message.insert(obj['system-designer-message'].newValue);\n    }\n  }, true);\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "g1d47010c7e1904c": {
      "_id": "g1d47010c7e1904c",
      "component": "Designer",
      "state": "addShortcuts",
      "action": "function addShortcuts() { \n  if (!this.isCordova()) {\n  \tif (this.isMac()) {\n      document.body.addEventListener('keydown', function keydown(event){\n        var message = this.require('message'),\n            key = event.which || event.keyCode,\n            command = event.metaKey ? event.metaKey : ((key === 91) ? true : false),\n            dialog = null,\n            Dialog = null;\n    \n        switch (true) {\n          // Command + O\n          case key === 79 && command:\n            if ($('#designer-dialog').children().length) {\n              $('#' + $(\"#designer-dialog\").children()[0].id).removeClass('fade').modal('hide');\n            }\n            Dialog = runtime.require('DialogCommand');\n            dialog = new Dialog({'title':''});\n            dialog.show();\n            event.stopPropagation();\n            event.preventDefault();\n            return false;\n            break;\n          default:\n            break;\n        }\n      }.bind(this));\n  \t} else {\n      document.body.addEventListener('keydown', function keydown(event){\n        var key = event.which || event.keyCode;\n        var ctrl = event.ctrlKey ? event.ctrlKey : ((key === 17) ? true : false);\n  \n        switch (true) {\n          // Ctrl + O\n          case key === 79 && ctrl:\n            if ($('#designer-dialog').children().length) {\n              $('#' + $(\"#designer-dialog\").children()[0].id).removeClass('fade').modal('hide');\n            }\n            Dialog = runtime.require('DialogCommand');\n            dialog = new Dialog({'title':''});\n            dialog.show();\n            event.stopPropagation();\n            event.preventDefault();\n            return false;\n            break;\n          default:\n            break;\n        }\n      }.bind(this)); \n  \t}\n  }\n}",
      "useCoreAPI": false,
      "core": false
    },
    "z1d2f51cbab10c86": {
      "_id": "z1d2f51cbab10c86",
      "component": "q189c51d320139d0",
      "state": "click",
      "action": "function click() { \n  $('#designer-toolbar-item-help').tooltip('hide');\n  if ($('#designer-dialog').children().length) {\n    $('#' + $(\"#designer-dialog\").children()[0].id).removeClass('fade').modal('hide');\n  }\n  \n  this.require('designer').open('https://designfirst.io/systemdesigner/documentation/docs/generate-a-class-diagram.html', '_blank', true);\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "x1c18b145e6157d8": {
      "_id": "x1c18b145e6157d8",
      "component": "_Channel",
      "state": "$designerDeleteSchema",
      "action": "function $designerDeleteSchema(id) { \n  var systemId = this.require('factory').system().id();\n  var system = this.require('storage').get(systemId);\n  \n  this.require('factory').create(system);\n  this.require('workspace').render();\t\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "m12e321f21a15f05": {
      "_id": "m12e321f21a15f05",
      "component": "_Channel",
      "state": "$designerCreateSchema",
      "action": "function $designerCreateSchema(id, schema) { \n  var systemId = this.require('factory').system().id();\n  var system = this.require('storage').get(systemId);\n  \n  this.require('factory').create(system);\n  this.require('workspace').render();\t\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "z101721b5941bf54": {
      "_id": "z101721b5941bf54",
      "component": "_Channel",
      "state": "$designerUpdateModel",
      "action": "function $designerUpdateModel(id, model) { \n  var systemId = this.require('factory').system().id();\n  var system = this.require('storage').get(systemId);\n  \n  this.require('factory').create(system);\n  this.require('workspace').render();\t\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "l108ea1b11c10e8b": {
      "_id": "l108ea1b11c10e8b",
      "component": "_Channel",
      "state": "$editorUpdateSchema",
      "action": "function $editorUpdateSchema(id, schema) { \n  var systemId = this.require('factory').system().id();\n  var system = this.require('storage').get(systemId);\n  \n  this.require('factory').create(system);\n  this.require('workspace').render();\t\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "b13285192b811ad1": {
      "_id": "b13285192b811ad1",
      "component": "_Channel",
      "state": "$editorUpdateModel",
      "action": "function $editorUpdateModel(id, model) { \n  var systemId = this.require('factory').system().id();\n  var system = this.require('storage').get(systemId);\n  \n  this.require('factory').create(system);\n  this.require('workspace').render();\t\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "u1c69b124bc1ac09": {
      "_id": "u1c69b124bc1ac09",
      "component": "_Channel",
      "state": "$editorUpdateSystem",
      "action": "function $editorUpdateSystem(id, system) { \n  var systemId = this.require('factory').system().id();\n  var system = this.require('storage').get(systemId);\n  \n  this.require('factory').create(system);\n  this.require('workspace').render();\t\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "d185231c5af12d54": {
      "_id": "d185231c5af12d54",
      "component": "q1da4e1ca6710ca2",
      "state": "click",
      "action": "function click() { \n  $('#designer-toolbar-item-zoomin').tooltip('hide');\n  if ($('#designer-dialog').children().length) {\n    $('#' + $(\"#designer-dialog\").children()[0].id).removeClass('fade').modal('hide');\n  }\n  \n  var svg = document.getElementsByTagName('svg')[0];\n  var matrixGroup = '';\n  \n  if (svg) {\n    matrixGroup = svg.getElementById('graph0');\t\n      \n    function zoom(scale) {\n      var previousScale = matrixGroup.getAttribute('transform').split(')')[0];\n      var transformInfo = matrixGroup.getAttribute('transform').replace(previousScale + ')', '');\n      \n      matrixGroup.setAttribute('transform', 'scale(' + scale + ') ' + transformInfo);\n    }\n    \n    this.require('viz').zoom(this.require('viz').zoom() + 0.1);\n    zoom(this.require('viz').zoom());\n    \n    this.require('message').success('Zoom x' + this.require('viz').zoom().toString().substring(0, 3) + ' applied.');\n  } else {\n    this.require('message').warning('There is no diagram.');\n  }\n}",
      "useCoreAPI": false,
      "core": false
    },
    "l19d291b99311024": {
      "_id": "l19d291b99311024",
      "component": "p15e7513ed512f61",
      "state": "click",
      "action": "function click() { \n  $('#designer-toolbar-item-zoomout').tooltip('hide');\n  if ($('#designer-dialog').children().length) {\n    $('#' + $(\"#designer-dialog\").children()[0].id).removeClass('fade').modal('hide');\n  }\n  \n  var svg = document.getElementsByTagName('svg')[0];\n  var matrixGroup = '';\n  \n  if (svg) {\n    matrixGroup = svg.getElementById('graph0');\t\n      \n    function zoom(scale) {\n      var previousScale = matrixGroup.getAttribute('transform').split(')')[0];\n      var transformInfo = matrixGroup.getAttribute('transform').replace(previousScale + ')', '');\n      \n      matrixGroup.setAttribute('transform', 'scale(' + scale + ') ' + transformInfo);\n    }\n  \n    this.require('viz').zoom(this.require('viz').zoom() - 0.1);\n    zoom(this.require('viz').zoom());\t\n  \n    this.require('message').success('Zoom x' + this.require('viz').zoom().toString().substring(0, 3) + ' applied.');\n  } else {\n    this.require('message').warning('There is no diagram.');\n  }\n}",
      "useCoreAPI": false,
      "core": false
    },
    "u1695c1c8551203c": {
      "_id": "u1695c1c8551203c",
      "component": "Diagram",
      "state": "render",
      "action": "function render(dotFile) { \n  var dotGraph = '',\n      storeConfig = null;\n\n  switch(true) {\n    case dotFile !== null:\n      dotGraph = dotFile;\n      document.title = 'class diagram';\n      break;\n    case this.data() !== '':\n      dotGraph = this.data();\n      document.title = 'class diagram';\n      break;\n    case this.require('factory').system() !== undefined:\n      storeConfig = this.require('storage').get('system-designer-config');\n      if (storeConfig && storeConfig.diagramType) {\n        dotGraph = this.require('export').toGraphviz(storeConfig.diagramType);\n      } else {\n        dotGraph = this.require('export').toGraphviz();\n      }\n      break;\n    default:  \n      document.title = 'class diagram';\n      $('#designer-diagram').empty();\n      this.require('message-help').render();\n      return;\n  }\n  \n  if (!this.ref()) {\n    this.ref(new Viz());\n  }\n\n  this.ref().renderSVGElement(dotGraph)\n  .then(function(element) {\n    var elt = document.getElementById('designer-diagram');\n\n    $('#designer-diagram').empty();\n    elt.appendChild(element);\n    \n    var svg = document.getElementsByTagName('svg')[0];\n    \n    // set width and heigth\n    svg.setAttribute('width', ($(document).width() - 50) + 'px');\n    svg.setAttribute('height', ($(document).height() - 50) + 'px');\n    \n    // svg event\n    svg.addEventListener('mousedown', startDrag, false);\n    svg.addEventListener('mousemove', drag, false);\n    svg.addEventListener('mouseup', endDrag, false);\n\n    var selectedElement, dragX, dragY;\n    var reTranslate = /translate\\s*\\(([-\\+\\d\\.\\s,e]+)\\)/gi;\n\n    function startDrag(evt) {\n      var screenMatrix = svg.getScreenCTM();\n      selectedElement = document.getElementById('graph0');\n      dragX = evt.clientX / screenMatrix.a;\n      dragY = evt.clientY / screenMatrix.d;\n\n      var transform = selectedElement.getAttribute('transform');\n      var translate = reTranslate.exec(transform);\n      if (translate) {\n        var digits = translate[1].split(/\\s*[,\\s]+/);\n        dragX -= parseFloat(digits[0] || 0);\n        dragY -= parseFloat(digits[1] || 0);\n      } else {\n        translate = 'translate(0, 0)';\n        if (transform) {\n          selectedElement.setAttribute('transform', translate + transform);\n        } else {\n          selectedElement.setAttribute('transform', translate);\n        }\n      }\n    }\n\n    function drag(evt) {\n      if (selectedElement) {\n        var screenMatrix = svg.getScreenCTM();\n        var x = evt.clientX / screenMatrix.a - dragX;\n        var y = evt.clientY / screenMatrix.d - dragY;\n\n        var transform = selectedElement.getAttribute('transform');\n        transform = transform.replace(reTranslate, 'translate(' + x  + ' ' + y + ')');\n        selectedElement.setAttribute('transform', transform);\n      }\n    }\n\n    function endDrag(evt) {\n      if (selectedElement) {\n        var screenMatrix = svg.getScreenCTM();\n        var x = evt.clientX / screenMatrix.a - dragX;\n        var y = evt.clientY / screenMatrix.d - dragY;\n\n        var transform = selectedElement.getAttribute('transform');\n        transform = transform.replace(reTranslate, 'translate(' + x  + ' ' + y + ')');\n        selectedElement.setAttribute('transform', transform);\n      }\n      selectedElement = false;\n    }\n    \n    if (runtime.require('viz').zoom() === 1) {\n      runtime.require('message').success('Diagram generated.');\n    }\n  })\n  .catch(error => {\n    if (!runtime.require('viz').ref()) {\n      runtime.require('viz').ref(new Viz());\n    }\n\n    runtime.require('message').danger(error.toString());\n  });\n}",
      "useCoreAPI": false,
      "core": false
    },
    "j1685617835183b2": {
      "_id": "j1685617835183b2",
      "component": "c1b63f13c911fcc8",
      "state": "click",
      "action": "function click() { \n  $('#designer-toolbar-item-zoominit').tooltip('hide');\n  if ($('#designer-dialog').children().length) {\n    $('#' + $(\"#designer-dialog\").children()[0].id).removeClass('fade').modal('hide');\n  }\n  \n  var message = this.require('message');\n  var data = this.require('viz').data();\n  \n  if (this.require('factory').system() || data) {\n\t this.require('viz').zoom(1);\n\t this.require('viz').render();\n  } else {\n    message.warning('There is no diagram.');\n  }\n}",
      "useCoreAPI": false,
      "core": false
    },
    "r1484a1f32d17210": {
      "_id": "r1484a1f32d17210",
      "component": "q16e321bb2c15a27",
      "state": "click",
      "action": "function click() { \n  $('#designer-toolbar-item-export-diagram').tooltip('hide');\n  if ($('#designer-dialog').children().length) {\n    $('#' + $(\"#designer-dialog\").children()[0].id).removeClass('fade').modal('hide');\n  }\n  \n  var message = this.require('message');\n  var data = this.require('viz').data();\n\n  // code inspired from the blog post\n  // https://thiscouldbebetter.wordpress.com/2012/12/18/loading-editing-and-saving-a-text-file-in-html5-using-javascrip/\n  if (this.require('factory').system() || data) {\n    var system = null,\n      textToWrite = null,\n      textFileAsBlob = null,\n      fileNameToSaveAs = null,\n      downloadLink = null;\n    \n    if (this.require('factory').system()) {\n      system = this.require('db').collections().System.find({\n        '_id': this.require('factory').system().id()\n      })[0];\n      system = JSON.parse(JSON.stringify(system));\n      textToWrite = '<?xml version=\"1.0\" encoding=\"utf-8\" ?><!DOCTYPE svg>' + $('#designer-diagram').html();\n      fileNameToSaveAs = this.require('factory').system().name() + '.svg';\n    } else {\n      textToWrite = '<?xml version=\"1.0\" encoding=\"utf-8\" ?><!DOCTYPE svg>' + $('#designer-diagram').html();\n      fileNameToSaveAs = 'class-diagram.svg';\n    }\n\n    if (!this.require('designer').isElectron()) {\n\n      textFileAsBlob = new Blob([textToWrite], {\n        type: 'application/octet-stream'\n      });\n\n      if (navigator.msSaveBlob) {\n        navigator.msSaveBlob(textFileAsBlob, fileNameToSaveAs);\n      } else {\n        downloadLink = document.createElement('a');\n        document.body.appendChild(downloadLink);\n        downloadLink.style.display = 'none';\n        downloadLink.download = fileNameToSaveAs;\n\n        if (window.URL != null) {\n          downloadLink.href = window.URL.createObjectURL(textFileAsBlob);\n        } else {\n          downloadLink.href = window.URL.createObjectURL(textFileAsBlob);\n        }\n        downloadLink.click();\n        window.URL.revokeObjectURL(downloadLink.href);\n      }\n      message.success('Exportation is done.');\n    } else {\n      var { dialog } = require('electron').remote;\n      var fs = require('fs');\n      var savePath = dialog.showSaveDialog({\n        'defaultPath': '~/' + fileNameToSaveAs\n      });\n      if (savePath) {\n        fs.writeFile(savePath, textToWrite, function (err) {\n          if (err) {\n            message.danger('Exportation failed.');\n          } else {\n            message.success('Exportation is done.');\n          }\n        });\n      }\n    }\n  } else {\n    message.warning('There is no diagram.');\n  }\n}",
      "useCoreAPI": false,
      "core": false
    },
    "i1cfbb13c0211eef": {
      "_id": "i1cfbb13c0211eef",
      "component": "Workspace",
      "state": "init",
      "action": "function init(conf) { \n  var that = this;\n\n  $('html')\n    .on('dragenter dragover', false)\n    .on('drop', function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n    \n      var files = e.originalEvent.dataTransfer.files;\n      var reader = new FileReader();\n      var dotFile = '';\n      reader.onload = function (event) {\n        dotFile += event.target.result;\n      };\n      reader.onloadend = function () {\n        var DialogDropDiagram = that.require('DialogDropDiagram');\n        \n        DialogDropDiagram = new DialogDropDiagram({\n          'title': 'A diagram has been found',\n          'message': 'You can view the diagram.'\n        });\n        \n        DialogDropDiagram.data(dotFile);\n        DialogDropDiagram.show();\n      };\n      if (files[0] && files[0].name && files[0].name.indexOf('.gv') !== -1) {\n        reader.readAsText(files[0], 'UTF-8');\n      }\n    });\t\n}",
      "useCoreAPI": false,
      "core": false
    }
  },
  "types": {},
  "components": {
    "Router": { "router": { "_id": "router" } },
    "ToolBarItem": {
      "a1e94f187c412b2a": {
        "_id": "a1e94f187c412b2a",
        "html": "toolbar-item-copyright.html",
        "position": 90,
        "type": "diagram",
        "platform": "all"
      },
      "q189c51d320139d0": {
        "_id": "q189c51d320139d0",
        "html": "toolbar-item-help.html",
        "platform": "all",
        "position": 80,
        "type": "diagram"
      },
      "p15e7513ed512f61": {
        "_id": "p15e7513ed512f61",
        "html": "toolbar-item-zoomout.html",
        "platform": "all",
        "position": 20,
        "type": "diagram"
      },
      "q1da4e1ca6710ca2": {
        "_id": "q1da4e1ca6710ca2",
        "html": "toolbar-item-zoomin.html",
        "platform": "all",
        "position": 30,
        "type": "diagram"
      },
      "c1b63f13c911fcc8": {
        "_id": "c1b63f13c911fcc8",
        "html": "toolbar-item-zoominit.html",
        "platform": "all",
        "position": 10,
        "type": "diagram"
      },
      "q16e321bb2c15a27": {
        "_id": "q16e321bb2c15a27",
        "html": "toolbar-item-export-diagram.html",
        "platform": "all",
        "position": 40,
        "type": "diagram"
      }
    },
    "Designer": {},
    "MenuItem": {
      "1f1781882618106": {
        "_id": "1f1781882618106",
        "name": "diagram",
        "html": "menu-item-diagram.html",
        "position": 10,
        "type": "diagram",
        "platform": "all"
      }
    },
    "MenuAction": {
      "1f8571164c179bg": {
        "_id": "1f8571164c179bg",
        "html": "menu-action-version.html",
        "position": 10,
        "type": "diagram"
      }
    },
    "MenuHeader": {
      "1fb101b99813a15": {
        "_id": "1fb101b99813a15",
        "html": "menu-header-schema.html",
        "type": "diagram"
      }
    },
    "Workspace": {},
    "Diagram": { "viz": { "_id": "viz", "ref": "", "zoom": 1 } }
  },
  "_id": "a1c33618ac01371c"
}
