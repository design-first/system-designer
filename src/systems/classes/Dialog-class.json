{
  "name": "Dialog-class",
  "master": false,
  "version": "1.0.0",
  "description": "",
  "schemas": {
    "n1a57f14f7e1d5fe": {
      "_name": "Dialog",
      "_inherit": ["_Component"],
      "title": "property",
      "message": "property",
      "data": "property",
      "html": "link",
      "ok": "event",
      "cancel": "event",
      "show": "method",
      "hide": "method",
      "_id": "n1a57f14f7e1d5fe"
    },
    "r1ddda1abc81d3ae": {
      "_name": "DialogCopyright",
      "_inherit": ["Dialog"],
      "_id": "r1ddda1abc81d3ae"
    },
    "j1dd971e4e417dc0": {
      "_name": "DialogBehaviorCreation",
      "_inherit": ["Dialog"],
      "_id": "j1dd971e4e417dc0"
    },
    "z1cebc15af210ffd": {
      "_name": "DialogComponentCreation",
      "_inherit": ["Dialog"],
      "_id": "z1cebc15af210ffd"
    },
    "y18a2615cad1374d": {
      "_name": "DialogConfig",
      "_inherit": ["Dialog"],
      "_id": "y18a2615cad1374d"
    },
    "w1b40b10be812656": {
      "_name": "DialogDropFile",
      "_inherit": ["Dialog"],
      "_id": "w1b40b10be812656"
    },
    "w143aa1a8401eb92": {
      "_name": "DialogExport",
      "_inherit": ["Dialog"],
      "_id": "w143aa1a8401eb92"
    },
    "n1c79a1da261e02e": {
      "_name": "DialogImport",
      "_inherit": ["Dialog"],
      "_id": "n1c79a1da261e02e"
    },
    "c1758d13d20146d4": {
      "_name": "DialogImportFile",
      "_inherit": ["Dialog"],
      "mergeSystem": "event",
      "importSystem": "event",
      "_id": "c1758d13d20146d4"
    },
    "t13c8d1b4271338c": {
      "_name": "DialogModelCreation",
      "_inherit": ["Dialog"],
      "_id": "t13c8d1b4271338c"
    },
    "z19abb1de8815574": {
      "_name": "DialogComponentInfo",
      "_inherit": ["Dialog"],
      "_id": "z19abb1de8815574"
    },
    "b1cad1118451b9d7": {
      "_name": "DialogSchemaCreation",
      "_inherit": ["Dialog"],
      "_id": "b1cad1118451b9d7"
    },
    "e1c0cd11f9210181": {
      "_name": "DialogSearch",
      "_inherit": ["Dialog"],
      "filter": "property",
      "currentSelection": "property",
      "nbResult": "property",
      "_id": "e1c0cd11f9210181"
    },
    "v112c0137f31f448": {
      "_name": "DialogShare",
      "_inherit": ["Dialog"],
      "_id": "v112c0137f31f448"
    },
    "j1a5781d076127b4": {
      "_name": "DialogSync",
      "_inherit": ["Dialog"],
      "_id": "j1a5781d076127b4"
    },
    "y1cc6f1fdc415f97": {
      "_name": "DialogSystemCreation",
      "_inherit": ["Dialog"],
      "_id": "y1cc6f1fdc415f97"
    },
    "z15c55119a7160f3": {
      "_name": "DialogTypeCreation",
      "_inherit": ["Dialog"],
      "_id": "z15c55119a7160f3"
    },
    "g1db25176311401d": {
      "_name": "DialogWelcome",
      "_inherit": ["Dialog"],
      "_id": "g1db25176311401d"
    },
    "m1b56110321128fb": {
      "_id": "m1b56110321128fb",
      "_name": "DialogExtension",
      "_inherit": ["Dialog"],
      "add": "method",
      "remove": "method"
    },
    "e1d0301185e17e58": {
      "_id": "e1d0301185e17e58",
      "_name": "DialogCommand",
      "_inherit": ["Dialog"],
      "filter": "property",
      "currentSelection": "property",
      "nbResult": "property"
    },
    "k16ab6191c412fea": {
      "_id": "k16ab6191c412fea",
      "_name": "DialogDelete",
      "_inherit": ["Dialog"]
    }
  },
  "models": {
    "l1d4181e4d71ade2": {
      "_name": "Dialog",
      "title": {
        "type": "text",
        "readOnly": true,
        "mandatory": true,
        "default": ""
      },
      "message": {
        "type": "text",
        "readOnly": true,
        "mandatory": false,
        "default": ""
      },
      "data": {
        "type": "object",
        "readOnly": false,
        "mandatory": false,
        "default": {}
      },
      "show": {},
      "hide": {},
      "cancel": {},
      "ok": {},
      "_id": "l1d4181e4d71ade2",
      "html": {
        "type": "@HTML",
        "readOnly": false,
        "mandatory": false,
        "default": ""
      }
    },
    "n14a831448a1ef6a": {
      "_name": "DialogCopyright",
      "_id": "n14a831448a1ef6a"
    },
    "g1ab8111f2d1c7ce": {
      "_name": "DialogBehaviorCreation",
      "_id": "g1ab8111f2d1c7ce"
    },
    "t12b5d1be8512beb": {
      "_name": "DialogComponentCreation",
      "_id": "t12b5d1be8512beb"
    },
    "t15a691554c1155f": {
      "_name": "DialogConfig",
      "_id": "t15a691554c1155f"
    },
    "c1b56e1fdb3174a8": {
      "_name": "DialogDropFile",
      "_id": "c1b56e1fdb3174a8"
    },
    "h1fedc1441312ac4": {
      "_name": "DialogExport",
      "_id": "h1fedc1441312ac4"
    },
    "t1c8ab1e8c010544": {
      "_name": "DialogImport",
      "_id": "t1c8ab1e8c010544"
    },
    "w15777160d41bb38": {
      "_name": "DialogImportFile",
      "mergeSystem": {},
      "importSystem": {},
      "_id": "w15777160d41bb38"
    },
    "v108dd1f00315ebe": {
      "_name": "DialogModelCreation",
      "_id": "v108dd1f00315ebe"
    },
    "o19888142191439e": {
      "_name": "DialogComponentInfo",
      "_id": "o19888142191439e"
    },
    "i15fee18f0e164ba": {
      "_name": "DialogSchemaCreation",
      "_id": "i15fee18f0e164ba"
    },
    "u1caa614eb713967": {
      "_name": "DialogSearch",
      "filter": {
        "type": "string",
        "readOnly": false,
        "mandatory": false,
        "default": ""
      },
      "_id": "u1caa614eb713967",
      "currentSelection": {
        "type": "number",
        "readOnly": false,
        "mandatory": false,
        "default": -1
      },
      "nbResult": {
        "type": "number",
        "readOnly": false,
        "mandatory": false,
        "default": 0
      }
    },
    "e167bf16b5c1fd5f": {
      "_name": "DialogShare",
      "_id": "e167bf16b5c1fd5f"
    },
    "k105d3130531ae5c": {
      "_name": "DialogSync",
      "_id": "k105d3130531ae5c"
    },
    "k19f8d10dec1beda": {
      "_name": "DialogSystemCreation",
      "_id": "k19f8d10dec1beda"
    },
    "x1e7931468415710": {
      "_name": "DialogTypeCreation",
      "_id": "x1e7931468415710"
    },
    "e1dd3f1e688107a8": {
      "_name": "DialogWelcome",
      "_id": "e1dd3f1e688107a8"
    },
    "u147e01d928148d4": {
      "_id": "u147e01d928148d4",
      "_name": "DialogExtension",
      "add": {},
      "remove": {}
    },
    "p17fe617ee3189f7": {
      "_id": "p17fe617ee3189f7",
      "_name": "DialogCommand",
      "filter": {
        "type": "string",
        "readOnly": false,
        "mandatory": false,
        "default": ""
      },
      "currentSelection": {
        "type": "number",
        "readOnly": false,
        "mandatory": false,
        "default": -1
      },
      "nbResult": {
        "type": "number",
        "readOnly": false,
        "mandatory": false,
        "default": 0
      }
    },
    "i1d79c1b51e1c166": {
      "_id": "i1d79c1b51e1c166",
      "_name": "DialogDelete"
    }
  },
  "behaviors": {
    "k10e3f115ef1a83b": {
      "_id": "k10e3f115ef1a83b",
      "component": "DialogCopyright",
      "state": "init",
      "action": "function init(conf) { \n  var html = '',\n      dom = null;\n  \n  $('#designer-dialog').empty();\n\n  html = this.require('dialog-modal-copyright.html');\n  document.querySelector('#designer-dialog').insertAdjacentHTML('afterbegin',\n    html.source()\n      .replace(/{{title}}/gi, this.title())\n      .replace(/{{message}}/gi, this.message())\n  );\n\n  //events\n  dom = document.getElementById('designer-dialog-copyright-modal-ok');\n  dom.addEventListener('click', function (event) {\n      this.ok();\n  }.bind(this));\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "k191d71c949120ec": {
      "_id": "k191d71c949120ec",
      "component": "DialogCopyright",
      "state": "show",
      "action": "function show() { \n  $('#designer-dialog-copyright-modal').modal('show');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "z17fdc13a9a1f940": {
      "_id": "z17fdc13a9a1f940",
      "component": "DialogCopyright",
      "state": "hide",
      "action": "function hide() { \n  $('#designer-dialog-copyright-modal').modal('hide');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "k11cb01de7316017": {
      "_id": "k11cb01de7316017",
      "component": "DialogImport",
      "state": "init",
      "action": "function init(conf) { \n  var html = '',\n      dom = null;\n\n  $('.modal-backdrop').remove();\n  $('#designer-dialog').empty();\n  \n  html = this.require('dialog-modal-import.html');\n  document.querySelector('#designer-dialog').insertAdjacentHTML('afterbegin',\n    html.source()\n        .replace(/{{title}}/gi, this.title())\n        .replace(/{{message}}/gi, this.message())\n  );\n  \n  // events\n  dom = document.getElementById('designer-dialog-import-modal-cancel');\n  dom.addEventListener('click', function click(event) {\n    this.cancel();\n  }.bind(this));\n  \n  dom = document.getElementById('designer-dialog-import-modal-ok');\n  dom.addEventListener('click', function click(event) {\n    this.ok();\n  }.bind(this));\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "n1ff331a4a41052e": {
      "_id": "n1ff331a4a41052e",
      "component": "DialogImport",
      "state": "show",
      "action": "function show() { \n  $('#designer-dialog-import-modal').modal('show');\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "c10f7913c3113bb1": {
      "_id": "c10f7913c3113bb1",
      "component": "DialogImport",
      "state": "hide",
      "action": "function hide() { \n  $('#designer-dialog-import-modal').modal('hide');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "w17f82152171991e": {
      "_id": "w17f82152171991e",
      "component": "DialogWelcome",
      "state": "init",
      "action": "function init(conf) { \n  var html = '',\n      dom = null;\n  \n  $('#designer-dialog').empty();\n  \n  html = this.require('dialog-modal-welcome.html');\n  document.querySelector('#designer-dialog').insertAdjacentHTML('afterbegin',\n    html.source()\n        .replace(/{{title}}/gi, this.title())\n  );\n  \n  // events\n  dom = document.getElementById('designer-dialog-welcome-modal-ok');\n  dom.addEventListener('click', function click(event) {\n    this.ok();\n  }.bind(this));\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "l149ed1bf1411137": {
      "_id": "l149ed1bf1411137",
      "component": "DialogWelcome",
      "state": "show",
      "action": "function show() { \n  $('#designer-dialog-welcome-modal').modal('show');\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "g184031e6b71648a": {
      "_id": "g184031e6b71648a",
      "component": "DialogWelcome",
      "state": "hide",
      "action": "function hide() { \n  $('#designer-dialog-welcome-modal').modal('hide');\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "z1d0ec1a0ce18278": {
      "_id": "z1d0ec1a0ce18278",
      "component": "DialogSync",
      "state": "init",
      "action": "function init(conf) { \n  var html = '',\n      dom = null;\n\n  $('#designer-dialog').empty();\n\n  html = this.require('dialog-modal-sync.html');\n  document.querySelector('#designer-dialog').insertAdjacentHTML('afterbegin',\n    html.source()\n        .replace(/{{title}}/gi, this.title())\n  );\n\n  // events\n  dom = document.getElementById('designer-dialog-sync-modal-ok');\n  dom.addEventListener('click', function click(event) {\n    this.ok();\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-type-creation-hasHTML');\n  dom.addEventListener('click', function click(event) {\n    if ($('#designer-dialog-type-creation-hasHTML')[0].checked) {\n        $('#designer-dialog-sync-options-log-level').show();\n    } else {\n        $('#designer-dialog-sync-options-log-level').hide();\n    }\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-sync-commit');\n  dom.addEventListener('click', function click(event) {\n    $('#designer-dialog-sync-comments-area').show();\n    $('#designer-dialog-sync-options-area').show();\n    $('#designer-dialog-sync-options-node').show();\n    if ($('#designer-dialog-type-creation-hasHTML')[0].checked) {\n        $('#designer-dialog-sync-options-log-level').show();\n    }\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-sync-refresh');\n  dom.addEventListener('click', function click(event) {\n    $('#designer-dialog-sync-comments-area').hide();\n    $('#designer-dialog-sync-options-area').hide();\n    $('#designer-dialog-sync-options-log-level').hide();\n    $('#designer-dialog-sync-options-node').hide();\n  }.bind(this));\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "f1df481fac01acdc": {
      "_id": "f1df481fac01acdc",
      "component": "DialogSync",
      "state": "show",
      "action": "function show() { \n  $('#designer-dialog-sync-modal').modal('show');\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "m187b818e2f1b30f": {
      "_id": "m187b818e2f1b30f",
      "component": "DialogSync",
      "state": "hide",
      "action": "function hide() { \n  $('#designer-dialog-sync-modal').modal('hide');\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "y1934b1e72412bd0": {
      "_id": "y1934b1e72412bd0",
      "component": "DialogShare",
      "state": "init",
      "action": "function init(conf) { \n  var html = null,\n      dom = null,\n      sys = '';\n\n  $('#designer-dialog').empty();\n\n  sys = this.require('db').collections().System.find({\n      '_id': this.require('factory').system().id()\n  })[0];\n\n  html = this.require('dialog-modal-share.html');\n  document.querySelector('#designer-dialog').insertAdjacentHTML('afterbegin',\n    html.source()\n        .replace(/{{title}}/gi, this.title())\n        .replace(/{{message}}/gi, window.location.toString().split('#')[0] + '?system=' + encodeURIComponent(JSON.stringify(sys)))\n  );\n\n  // events\n  dom = document.getElementById('designer-dialog-share-modal-cancel');\n  dom.addEventListener('click', function click(event) {\n    this.cancel();\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-share-modal-ok');\n  dom.addEventListener('click', function click(event) {\n    this.ok();\n  }.bind(this));\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "l1eb0516ca015910": {
      "_id": "l1eb0516ca015910",
      "component": "DialogShare",
      "state": "show",
      "action": "function show() { \n  $('#designer-dialog-share-modal').modal('show');\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "q1e62a1c9d61ba89": {
      "_id": "q1e62a1c9d61ba89",
      "component": "DialogShare",
      "state": "hide",
      "action": "function hide() { \n  $('#designer-dialog-share-modal').modal('hide');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "s1d027166051b0ad": {
      "_id": "s1d027166051b0ad",
      "component": "DialogConfig",
      "state": "init",
      "action": "function init(conf) { \n  var html = '',\n      dom = null,\n      that = this,\n      storeConfig = null,\n      designer = that.require('designer');\n\n  $('#designer-dialog').empty();\n\n  html = this.require('dialog-modal-config.html');\n  document.querySelector('#designer-dialog').insertAdjacentHTML('afterbegin',\n    html.source()\n        .replace(/{{title}}/gi, this.title())\n  );\n\n  // default config value\n  storeConfig = this.require('storage').get('system-designer-config');\n\n  if (!storeConfig) {\n    storeConfig = {};\n  }\n\n  if (typeof storeConfig.debugType === 'undefined') {\n    storeConfig.debugType = 'client';\n    this.require('storage').set('system-designer-config', storeConfig);\n  }\n  if (storeConfig.debugType === 'client') {\n    $('#designer-dialog-config-radio-client').attr('checked', true);\n    $('#designer-dialog-config-server-form').hide();\n  } else {\n    $('#designer-dialog-config-radio-server').attr('checked', true);\n    $('#designer-dialog-config-client-form').hide();\n  }\n  if (storeConfig.urlClient) {\n    $('#designer-dialog-config-url-client')[0].value = storeConfig.urlClient;\n  }\n  if (storeConfig.urlServer) {\n    $('#designer-dialog-config-url-server')[0].value = storeConfig.urlServer;\n  }\n  if (storeConfig.githubToken) {\n    $('#designer-dialog-config-github-token')[0].value = atob(storeConfig.githubToken);\n  }\n  if (storeConfig.githubRepository) {\n    $('#designer-dialog-config-github-repository')[0].value = storeConfig.githubRepository;\n  }\n  if (storeConfig.advancedMode) {\n    $('#designer-dialog-config-advanced-mode-isAdvanced').attr('checked', true);\n  }\n\n  // events\n  dom = document.getElementById('designer-dialog-config-radio-client');\n  dom.addEventListener('click', function click(event) {\n    var config = this.require('storage').get('system-designer-config');\n\n    if (!config) {\n      config = {};\n    }\n\n    config.debugType = 'client';\n    this.require('storage').set('system-designer-config', config);\n\n    $('#designer-dialog-config-client-form').show();\n    $('#designer-dialog-config-server-form').hide();\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-config-radio-server');\n  dom.addEventListener('click', function click(event) {\n    var config = this.require('storage').get('system-designer-config');\n\n    if (!config) {\n      config = {};\n    }\n\n    config.debugType = 'server';\n    this.require('storage').set('system-designer-config', config);\n\n    $('#designer-dialog-config-client-form').hide();\n    $('#designer-dialog-config-server-form').show();\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-config-url-client');\n  dom.addEventListener('keydown', function keydown(event) {\n    if (event.keyCode === 13) {\n        event.stopPropagation();\n        event.preventDefault();\n        if ($('#designer-dialog-config-url-client').val()) {\n          this.ok();\n        }\n        return false;\n    }\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-config-github-token');\n  dom.addEventListener('keydown', function keydown(event) {\n    if (event.keyCode === 13) {\n        event.stopPropagation();\n        event.preventDefault();\n        if ($('#designer-dialog-config-github-token').val()) {\n          this.ok();\n        }\n        return false;\n    }\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-config-github-repository');\n  dom.addEventListener('keydown', function keydown(event) {\n    if (event.keyCode === 13) {\n        event.stopPropagation();\n        event.preventDefault();\n        if ($('#designer-dialog-config-github-repository').val()) {\n          this.ok();\n        }\n        return false;\n    }\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-config-url-server');\n  dom.addEventListener('keydown', function keydown(event) {\n    if (event.keyCode === 13) {\n        event.stopPropagation();\n        event.preventDefault();\n        if ($('#designer-dialog-config-url-server').val()) {\n          this.ok();\n        }\n        return false;\n    }\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-config-advanced-mode-isAdvanced');\n  dom.addEventListener('click', function click(event) {\n    var config = this.require('storage').get('system-designer-config');\n\n    if (!config) {\n      config = {};\n    }\n\n    config.advancedMode = $('#designer-dialog-config-advanced-mode-isAdvanced').prop('checked');\n    this.require('storage').set('system-designer-config', config);\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-config-modal-cancel');\n  dom.addEventListener('click', function click(event) {\n    this.cancel();\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-config-modal-ok');\n  dom.addEventListener('click', function click(event) {\n    this.ok();\n  }.bind(this));\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "f16d5719c171dfe5": {
      "_id": "f16d5719c171dfe5",
      "component": "DialogConfig",
      "state": "show",
      "action": "function show() { \n  $('#designer-dialog-config-modal').modal('show');\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "l1cb42113d7185c8": {
      "_id": "l1cb42113d7185c8",
      "component": "DialogConfig",
      "state": "hide",
      "action": "function hide() { \n  $('#designer-dialog-config-modal').modal('hide');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "f1f43d11c0d15597": {
      "_id": "f1f43d11c0d15597",
      "component": "DialogConfig",
      "state": "ok",
      "action": "function ok() { \n  var config = this.require('storage').get('system-designer-config');\n\n  if (!config) {\n    config = {};\n  }\n\n  config.urlClient = $('#designer-dialog-config-url-client')[0].value;\n  config.urlServer = $('#designer-dialog-config-url-server')[0].value;\n  config.githubToken = btoa($('#designer-dialog-config-github-token')[0].value);\n  config.githubRepository = $('#designer-dialog-config-github-repository')[0].value;\n\n  this.require('storage').set('system-designer-config', config);\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "t143b71071c16185": {
      "_id": "t143b71071c16185",
      "component": "DialogImportFile",
      "state": "init",
      "action": "function init(conf) { \n  var html = '',\n      dom = null,\n      that = this,\n      libraries = [],\n      library = '',\n      systems = [],\n      system = '',\n      sys = '',\n      systemIds = '',\n      length = 0,\n      i = 0,\n      list = '',\n      platform = '',\n      platformLibraries = [];\n\n  $('#designer-dialog').empty();\n\n  libraries = this.require('db').collections().JSON.find({\n    'platform': 'all'\n  });\n  \n  // get platformspecific items\n  switch(true) {\n    case this.require('designer').isElectron() === true:\n      platform = 'electron';\n      break;\n    case this.require('designer').isCordova() === true:\n      platform = 'electron';\n      break;\n    default:\n      platform = 'web';\n      break;\n  }\n  \n  platformLibraries = this.require('db').collections().JSON.find({\n    'platform': platform\n  });\n  \n  libraries = libraries.concat(platformLibraries);\n  \n  // sort JSON\n  libraries.sort(function (itemA, itemB) {\n    if (itemA._id > itemB._id) {\n      return 1;\n    }\n    if (itemA._id < itemB._id) {\n      return -1;\n    }\n    return 0;\n  });\n  \n  length = libraries.length;\n  for (i = 0; i < length; i++) {\n    library = this.require(libraries[i]._id);\n\n    list = list + '<a class=\"list-group-item\" id=\"designer-dialog-import-file-modal-library-' + library.id() + '\">' +\n        '<h4 class=\"list-group-item-heading\">' + library.source().description.substr(0, 40).split('\\n')[0].split('.')[0] + '</h4>' +\n        '<p class=\"list-group-item-text\">v' + library.source().version + '</p>' +\n        '</a>';\n  }\n\n  systems = this.require('storage').get('system-designer-systems');\n\n  if (systems) {\n    systemIds = systems.systems;\n  }\n  length = systemIds.length;\n\n  for (i = 0; i < length; i++) {\n    system = this.require('storage').get(systemIds[i]);\n\n    if (this.require('factory').system() && this.require('factory').system().id() === system._id) {\n    } else {\n        sys = sys + '<a class=\"list-group-item\" id=\"designer-dialog-import-file-modal-systems-' + system._id + '\">' +\n            '<h4 class=\"list-group-item-heading\">' + system.name + '</h4>' +\n            '<p class=\"list-group-item-text\">v' + system.version + '</p>' +\n            '</a>';\n    }\n  }\n\n  html = this.require('dialog-modal-import-file.html');\n  document.querySelector('#designer-dialog').insertAdjacentHTML('afterbegin',\n    html.source()\n        .replace(/{{title}}/gi, this.title())\n        .replace(/{{library}}/gi, list)\n        .replace(/{{systems}}/gi, sys)\n  );\n\n  // init\n  if (sys === '') {\n    $('#designer-dialog-import-modal-from-systems-input').hide();\n    if (this.require('designer').isCordova()) {\n      $('#designer-dialog-import-modal-from-library-form').show();\n      $('#designer-dialog-import-modal-type-import').hide();\n    }\n  } else {\n    if (this.require('designer').isCordova()) {\n      $('#designer-dialog-import-modal-from-library-form').show();\n      $('#designer-dialog-import-modal-type-import').show();\n    }\n  }\n  if (this.require('designer').isCordova()) {\n    $('#designer-dialog-import-modal-from-file').attr('checked', false);\n    $('#designer-dialog-import-modal-from-library').attr('checked', true);\n  }\n  if (!this.require('factory').system()) {\n    $('#designer-dialog-import-file-modal-merge').hide();\n  }\n\n  // systems events  \n  var callbackSystemEvent = function cbSystemEvent(event) {\n    var id = '',\n        systems = null,\n        length = 0,\n        i = 0;\n\n    if ($(this).hasClass('active')) {\n      $(this).removeClass('active');\n      that.data(null);\n    } else {\n      id = this.getAttribute('id').replace('designer-dialog-import-file-modal-systems-', '');\n\n      that.data(that.require('storage').get(id));\n\n      // remove old active\n      systems = document.getElementById('designer-dialog-import-file-modal-systems');\n\n      length = systems.children.length;\n      for (i = 0; i < length; i++) {\n        $(systems.children[i]).removeClass('active');\n      }\n\n      // add current active\n      $(this).addClass('active');\n    }\n  };\n\n  length = systemIds.length;\n  for (i = 0; i < length; i++) {\n    system = that.require('storage').get(systems.systems[i]);\n    if (this.require('factory').system() && this.require('factory').system().id() === system._id) {\n    } else {\n      dom = document.getElementById('designer-dialog-import-file-modal-systems-' + system._id);\n      dom.addEventListener('click', callbackSystemEvent);\n    }\n  }\n\n  // library events  \n  var callbackEvent = function cbEvent(event) {\n    var id = '',\n        libraries = null,\n        length = 0,\n        i = 0,\n        system = {};\n\n    if ($(this).hasClass('active')) {\n      $(this).removeClass('active');\n      that.data(null);\n    } else {\n      id = this.getAttribute('id').replace('designer-dialog-import-file-modal-library-', '');\n\n      // case of extensions\n      system = that.require(id).source();\n      if (system.name.indexOf('extension-') !== -1) {\n        system.name = 'extension-' + Math.floor((1 + Math.random()) * 0x10000).toString(16);\n        system._id = that.require('factory').generateId();\n      }\n      \n      that.data(system);\n\n      // remove old active\n      libraries = document.getElementById('designer-dialog-import-file-modal-library');\n\n      length = libraries.children.length;\n      for (i = 0; i < length; i++) {\n        $(libraries.children[i]).removeClass('active');\n      }\n\n      // add current active\n      $(this).addClass('active');\n    }\n  };\n\n  length = libraries.length;\n  for (i = 0; i < length; i++) {\n    library = this.require(libraries[i]._id);\n    dom = document.getElementById('designer-dialog-import-file-modal-library-' + library.id());\n\n    dom.addEventListener('click', callbackEvent);\n  }\n\n  dom = document.getElementById('designer-dialog-import-modal-from-file');\n  dom.addEventListener('click', function click(event) {\n    this.data({});\n    $('#designer-dialog-import-modal-from-file-form').show();\n    $('#designer-dialog-import-modal-from-systems-form').hide();\n    $('#designer-dialog-import-modal-from-library-form').hide();\n    $('#designer-dialog-import-file-modal-import').show();\n    $('#designer-dialog-import-file-modal-merge').removeClass('btn-primary');\n    $('#designer-dialog-import-file-modal-merge').addClass('btn-default');\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-import-modal-from-library');\n  dom.addEventListener('click', function click(event) {\n    this.data({});\n    $('#designer-dialog-import-modal-from-library-form').show();\n    $('#designer-dialog-import-modal-from-systems-form').hide();\n    $('#designer-dialog-import-modal-from-file-form').hide();\n    $('#designer-dialog-import-file-modal-import').show();\n    $('#designer-dialog-import-file-modal-merge').removeClass('btn-primary');\n    $('#designer-dialog-import-file-modal-merge').addClass('btn-default');\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-import-modal-from-systems');\n  dom.addEventListener('click', function click(event) {\n    this.data({});\n    $('#designer-dialog-import-modal-from-library-form').hide();\n    $('#designer-dialog-import-modal-from-systems-form').show();\n    $('#designer-dialog-import-modal-from-file-form').hide();\n    $('#designer-dialog-import-file-modal-import').hide();\n    $('#designer-dialog-import-file-modal-merge').removeClass('btn-default');\n    $('#designer-dialog-import-file-modal-merge').addClass('btn-primary');\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-import-file-modal-cancel');\n  dom.addEventListener('click', function click(event) {\n    this.cancel();\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-import-file-modal-merge');\n  dom.addEventListener('click', function click(event) {\n    if (this.data() && Object.keys(this.data()).length) {\n      this.mergeSystem();\n    }\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-import-file-modal-import');\n  dom.addEventListener('click', function click(event) {\n    if (this.data() && Object.keys(this.data()).length) {\n      this.importSystem();\n    }\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-import-file-modal-file');\n  dom.addEventListener('change', function click(e) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    var files = e.target.files,\n        reader = new FileReader(),\n        json = '',\n        that = this;\n\n    reader.onload = function onload(event) {\n      json = json + event.target.result;\n    };\n    reader.onloadend = function onloadend() {\n      try {\n        that.data(JSON.parse(json));\n      } catch (e) {\n        that.data({});\n      }\n    };\n    if (files[0]) {\n      reader.readAsText(files[0], 'UTF-8');\n    }\n  }.bind(this));\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "n1948e18c6f1f038": {
      "_id": "n1948e18c6f1f038",
      "component": "DialogImportFile",
      "state": "show",
      "action": "function show() { \n  $('#designer-dialog-import-file-modal').modal('show');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "y1c99c14f7316ed0": {
      "_id": "y1c99c14f7316ed0",
      "component": "DialogImportFile",
      "state": "hide",
      "action": "function hide() { \n  $('#designer-dialog-import-file-modal').modal('hide');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "w13035176cd18ec0": {
      "_id": "w13035176cd18ec0",
      "component": "DialogDropFile",
      "state": "init",
      "action": "function init(conf) { \n  var html = null,\n      dom = null;\n\n  $('#designer-dialog').empty();\n\n  html = this.require('dialog-modal-drop-file.html');\n  document.querySelector('#designer-dialog').insertAdjacentHTML('afterbegin',\n    html.source()\n        .replace(/{{title}}/gi, this.title())\n        .replace(/{{message}}/gi, this.message())\n  );\n\n  //events\n  dom = document.getElementById('designer-dialog-drop-file-modal-cancel');\n  dom.addEventListener('click', function click(event) {\n    this.cancel();\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-drop-file-modal-merge');\n  dom.addEventListener('click', function click(event) {\n    this.require('factory').mergeSystem(this.data());\n    \n    this.require('designer').save();\n\n    this.require('spaces').render();\n    this.require('workspace').render();\n\n    this.require('router').update();\n\n    this.hide();\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-drop-file-modal-import');\n  dom.addEventListener('click', function click(event) {\n    var System = this.require('System'),\n      sys = null,\n      state = this.require('state'),\n      message = this.require('message');\n\n    if (this.require('factory').system()) {\n      this.require('factory').system().destroy();\n    }\n    sys = this.require('factory').create(this.data());\n  \n    // empty log\n    state.logs().forEach(function (item) {\n      this.logs().pop();\n    }.bind(state));\n  \n    this.require('designer').save();\n  \n    this.require('state').space(sys.name());\n    this.require('spaces').render();\n    this.require('workspace').render();\n  \n    this.require('router').update();\n  \n    this.hide();\n    this.require('designer').save();\n  \n    message.success('Importation of the system is done.');\t\n  }.bind(this));\n\n  if (!this.require('factory').system()) {\n    $('#designer-dialog-drop-file-modal-merge').hide();\n  }\n}",
      "useCoreAPI": false,
      "core": false
    },
    "i1c2891d03c165db": {
      "_id": "i1c2891d03c165db",
      "component": "DialogDropFile",
      "state": "show",
      "action": "function show() { \n  $('#designer-dialog-drop-file-modal').modal('show');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "w1ef271a5801083b": {
      "_id": "w1ef271a5801083b",
      "component": "DialogDropFile",
      "state": "hide",
      "action": "function hide() { \n  $('#designer-dialog-drop-file-modal').modal('hide');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "o158c0125d313bc1": {
      "_id": "o158c0125d313bc1",
      "component": "DialogTypeCreation",
      "state": "init",
      "action": "function init(conf) { \n  var html = '',\n      dom = null;\n\n  $('#designer-dialog').empty();\n\n  html = this.require('dialog-modal-type-creation.html');\n  document.querySelector('#designer-dialog').insertAdjacentHTML('afterbegin',\n    html.source()\n        .replace(/{{title}}/gi, this.title())\n  );\n\n  //events\n  dom = document.getElementById('designer-dialog-type-creation-name');\n  dom.addEventListener('keydown', function keydown(event) {\n    if (event.keyCode === 13) {\n      event.stopPropagation();\n      event.preventDefault();\n      if ($('#designer-dialog-type-creation-name').val()) {\n        this.ok();\n      }\n      return false;\n    }\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-type-creation-modal-cancel');\n  dom.addEventListener('click', function click(event) {\n    this.cancel();\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-type-creation-modal-ok');\n  dom.addEventListener('click', function click(event) {\n    this.ok();\n  }.bind(this));\n\n  // focus\n  $('#designer-dialog-type-creation-modal').on('shown.bs.modal', function modal() {\n    $('#designer-dialog-type-creation-name').focus();\n  });\n}",
      "useCoreAPI": false,
      "core": false
    },
    "f1bf26153e91a94e": {
      "_id": "f1bf26153e91a94e",
      "component": "DialogTypeCreation",
      "state": "show",
      "action": "function show() { \n  $('#designer-dialog-type-creation-modal').modal('show');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "r1b7ef1af221063a": {
      "_id": "r1b7ef1af221063a",
      "component": "DialogTypeCreation",
      "state": "hide",
      "action": "function hide() { \n  $('#designer-dialog-type-creation-modal').modal('hide');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "m1c6a71fad71fee1": {
      "_id": "m1c6a71fad71fee1",
      "component": "DialogExport",
      "state": "init",
      "action": "function init(conf) { \n  var html = '',\n      dom = null,\n      system = this.require('factory').system();\n\n  $('#designer-dialog').empty();\n\n  html = this.require('dialog-modal-export.html');\n  document.querySelector('#designer-dialog').insertAdjacentHTML('afterbegin',\n    html.source()\n        .replace(/{{title}}/gi, this.title())\n  );\n\n  // default value\n  if (system.master() === true) {\n    $('#designer-dialog-export-isMaster').attr('checked', true);\n  }\n\n  //events\n  dom = document.getElementById('designer-dialog-export-modal-cancel');\n  dom.addEventListener('click', function click(event) {\n    this.cancel();\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-export-modal-ok');\n  dom.addEventListener('click', function click(event) {\n    this.ok();\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-export-json');\n  dom.addEventListener('click', function click(event) {\n    $('#designer-dialog-export-options').show();\n    $('#designer-dialog-export-options-log-level').hide();\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-export-javascript');\n  dom.addEventListener('click', function click(event) {\n    $('#designer-dialog-export-options').hide();\n    $('#designer-dialog-export-options-log-level').show();\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-export-html');\n  dom.addEventListener('click', function click(event) {\n    $('#designer-dialog-export-options').hide();\n    $('#designer-dialog-export-options-log-level').show();\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-export-node');\n  dom.addEventListener('click', function click(event) {\n    $('#designer-dialog-export-options').hide();\n    $('#designer-dialog-export-options-log-level').show();\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-export-modal');\n  dom.addEventListener('keydown', function keydown(event) {\n    if (event.keyCode === 13) {\n      event.stopPropagation();\n      event.preventDefault();\n      this.ok();\n      return false;\n    }\n  }.bind(this));\n}",
      "useCoreAPI": false,
      "core": false
    },
    "j1c3811fb511de72": {
      "_id": "j1c3811fb511de72",
      "component": "DialogExport",
      "state": "show",
      "action": "function show() { \n  $('#designer-dialog-export-modal').modal('show');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "o11bf7168fa1a773": {
      "_id": "o11bf7168fa1a773",
      "component": "DialogExport",
      "state": "hide",
      "action": "function hide() { \n  $('#designer-dialog-export-modal').modal('hide');\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "l15e6a1e7711d0ef": {
      "_id": "l15e6a1e7711d0ef",
      "component": "DialogSchemaCreation",
      "state": "init",
      "action": "function init(conf) { \n  var html = '',\n      dom = null;\n\n  $('#designer-dialog').empty();\n\n  html = this.require('dialog-modal-schema-creation.html');\n  document.querySelector('#designer-dialog').insertAdjacentHTML('afterbegin',\n    html.source()\n        .replace(/{{title}}/gi, this.title())\n  );\n\n  //events\n  dom = document.getElementById('designer-dialog-schema-creation-name');\n  dom.addEventListener('keydown', function keydown(event) {\n    if (event.keyCode === 13) {\n      event.stopPropagation();\n      event.preventDefault();\n      if ($('#designer-dialog-schema-creation-name').val()) {\n        this.ok();\n      }\n      return false;\n    }\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-schema-creation-modal-cancel');\n  dom.addEventListener('click', function click(event) {\n    this.cancel();\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-schema-creation-modal-ok');\n  dom.addEventListener('click', function click(event) {\n    this.ok();\n  }.bind(this));\n\n  // focus\n  $('#designer-dialog-schema-creation-modal').on('shown.bs.modal', function modal() {\n    $('#designer-dialog-schema-creation-name').focus();\n  });\n}",
      "useCoreAPI": false,
      "core": false
    },
    "d1118d16e2b12b21": {
      "_id": "d1118d16e2b12b21",
      "component": "DialogSchemaCreation",
      "state": "show",
      "action": "function show() { \n  $('#designer-dialog-schema-creation-modal').modal('show');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "o121e11a6ee1db91": {
      "_id": "o121e11a6ee1db91",
      "component": "DialogSchemaCreation",
      "state": "hide",
      "action": "function hide() { \n  $('#designer-dialog-schema-creation-modal').modal('hide');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "w1f7a8132f216d1c": {
      "_id": "w1f7a8132f216d1c",
      "component": "DialogSystemCreation",
      "state": "init",
      "action": "function init(conf) { \n  var html = '',\n      dom = null;\n\n  $('#designer-dialog').empty();\n\n  html = this.require('dialog-modal-system-creation.html');\n  document.querySelector('#designer-dialog').insertAdjacentHTML('afterbegin',\n    html.source()\n        .replace(/{{title}}/gi, this.title())\n  );\n\n  //events\n  dom = document.getElementById('designer-dialog-system-creation-name');\n  dom.addEventListener('keydown', function keydown(event) {\n    if (event.keyCode === 13) {\n      event.stopPropagation();\n      event.preventDefault();\n      if ($('#designer-dialog-system-creation-name').val()) {\n        this.ok();\n      }\n      return false;\n    }\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-system-creation-modal-cancel');\n  dom.addEventListener('click', function click(event) {\n    this.cancel();\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-system-creation-modal-ok');\n  dom.addEventListener('click', function click(event) {\n    this.ok();\n  }.bind(this));\n\n  // focus\n  $('#designer-dialog-system-creation-modal').on('shown.bs.modal', function modal() {\n    $('#designer-dialog-system-creation-name').focus();\n  });\n}",
      "useCoreAPI": false,
      "core": false
    },
    "e1e6ca1015e1d465": {
      "_id": "e1e6ca1015e1d465",
      "component": "DialogSystemCreation",
      "state": "show",
      "action": "function show() { \n  $('#designer-dialog-system-creation-modal').modal('show');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "m10f82178e11130e": {
      "_id": "m10f82178e11130e",
      "component": "DialogSystemCreation",
      "state": "hide",
      "action": "function hide() { \n  $('#designer-dialog-system-creation-modal').modal('hide');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "l1188a196431b09d": {
      "_id": "l1188a196431b09d",
      "component": "DialogModelCreation",
      "state": "init",
      "action": "function init(conf) { \n  var html = '',\n      dom = null;\n\n  $('#designer-dialog').empty();\n\n  html = this.require('dialog-modal-model-creation.html');\n  document.querySelector('#designer-dialog').insertAdjacentHTML('afterbegin',\n    html.source()\n        .replace(/{{title}}/gi, this.title())\n  );\n\n  dom = document.getElementById('designer-dialog-model-creation-modal-ok');\n  dom.addEventListener('click', function click(event) {\n    this.ok();\n  }.bind(this));\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "v1f50e113f9119f9": {
      "_id": "v1f50e113f9119f9",
      "component": "DialogModelCreation",
      "state": "show",
      "action": "function show() { \n  $('#designer-dialog-model-creation-modal').modal('show');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "t122401bc301f40a": {
      "_id": "t122401bc301f40a",
      "component": "DialogModelCreation",
      "state": "hide",
      "action": "function hide() { \n  $('#designer-dialog-model-creation-modal').modal('hide');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "n1de871334c1351c": {
      "_id": "n1de871334c1351c",
      "component": "DialogBehaviorCreation",
      "state": "init",
      "action": "function init(conf) { \n  var html = '',\n      dom = null,\n      selectStates = '',\n      states = [],\n      factory = this.require('factory'),\n      space = this.require('state').space();\n\n  $('#designer-dialog').empty();\n\n  states = factory.getModelPaths(space);\n  states.forEach(\n    function (name) {\n      selectStates = selectStates + '<option value=\"' + name + '\">' + name + '</option>';\n  });\n\n  html = this.require('dialog-modal-behavior-creation.html');\n  document.querySelector('#designer-dialog').insertAdjacentHTML('afterbegin',\n    html.source()\n        .replace(/{{title}}/gi, this.title())\n        .replace(/{{states}}/gi, selectStates)\n  );\n\n  //events\n  dom = document.getElementById('designer-dialog-behavior-creation-state');\n  dom.addEventListener('keydown', function (event) {\n    if (event.keyCode === 13) {\n      event.stopPropagation();\n      event.preventDefault();\n      if ($('#designer-dialog-behavior-creation-state').val()) {\n        this.ok();\n      }\n      return false;\n    }\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-behavior-creation-modal-cancel');\n  dom.addEventListener('click', function click(event) {\n    this.cancel();\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-behavior-creation-modal-ok');\n  dom.addEventListener('click', function click(event) {\n    this.ok();\n  }.bind(this));\n\n  // focus\n  $('#designer-dialog-behavior-creation-modal').on('shown.bs.modal', function modal() {\n    $('#designer-dialog-behavior-creation-state').focus();\n  });\n}",
      "useCoreAPI": false,
      "core": false
    },
    "z134f51d13d1b4d0": {
      "_id": "z134f51d13d1b4d0",
      "component": "DialogBehaviorCreation",
      "state": "show",
      "action": "function show() { \n  $('#designer-dialog-behavior-creation-modal').modal('show');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "b17f0312b751a46c": {
      "_id": "b17f0312b751a46c",
      "component": "DialogBehaviorCreation",
      "state": "hide",
      "action": "function hide() { \n  $('#designer-dialog-behavior-creation-modal').modal('hide');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "q1b5f114b1c1e74e": {
      "_id": "q1b5f114b1c1e74e",
      "component": "DialogComponentCreation",
      "state": "init",
      "action": "function init(conf) { \n  var html = '',\n      name = '',\n      dom = null,\n      selectModels = '',\n      designer = this.require('designer'),\n      models = this.require('factory').system().models();\n\n  $('#designer-dialog').empty();\n\n  for (name in models) {\n    selectModels = selectModels + '<option value=\"' + name + '\">' + name + '</option>';\n  }\n\n  html = this.require('dialog-modal-component-creation.html');\n  document.querySelector('#designer-dialog').insertAdjacentHTML('afterbegin',\n    html.source()\n        .replace(/{{title}}/gi, this.title())\n        .replace(/{{models}}/gi, selectModels)\n  );\n\n  // events\n  dom = document.getElementById('designer-dialog-component-creation-modal-cancel');\n  dom.addEventListener('click', function click(event) {\n    this.cancel();\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-component-creation-modal-ok');\n  dom.addEventListener('click', function click(event) {\n    this.ok();\n  }.bind(this));\n}",
      "useCoreAPI": false,
      "core": false
    },
    "r1efd0102531db59": {
      "_id": "r1efd0102531db59",
      "component": "DialogComponentCreation",
      "state": "show",
      "action": "function show() { \n  $('#designer-dialog-component-creation-modal').modal('show');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "t1250217bbe111b1": {
      "_id": "t1250217bbe111b1",
      "component": "DialogComponentCreation",
      "state": "hide",
      "action": "function hide() { \n  $('#designer-dialog-component-creation-modal').modal('hide');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "r1b0d81aa7d163d1": {
      "_id": "r1b0d81aa7d163d1",
      "component": "DialogComponentInfo",
      "state": "init",
      "action": "function init(conf) { \n  var html = '',\n      dom = null;\n\n  $('#designer-dialog').empty();\n\n  html = this.require('dialog-modal-component-info.html');\n  document.querySelector('#designer-dialog').insertAdjacentHTML('afterbegin',\n    html.source()\n        .replace(/{{title}}/gi, this.title())\n  );\n\n  // events\n  dom = document.getElementById('designer-dialog-component-info-modal-ok');\n  dom.addEventListener('click', function click(event) {\n    this.hide();\n  }.bind(this));\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "n10b6a1d0411f758": {
      "_id": "n10b6a1d0411f758",
      "component": "DialogComponentInfo",
      "state": "show",
      "action": "function show() { \n  $('#designer-dialog-component-info-modal').modal('show');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "n1cb8f1f6981f0b8": {
      "_id": "n1cb8f1f6981f0b8",
      "component": "DialogComponentInfo",
      "state": "hide",
      "action": "function hide() { \n  $('#designer-dialog-component-info-modal').modal('hide');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "p14fb71056d1c4e5": {
      "_id": "p14fb71056d1c4e5",
      "component": "DialogSearch",
      "state": "init",
      "action": "function init(conf) { \n  var html = '',\n      dom = null,\n      system = this.require('factory').system();\n\n  $('#designer-dialog').empty();\n\n  html = this.require('dialog-modal-search.html');\n  document.querySelector('#designer-dialog').insertAdjacentHTML('afterbegin',\n    html.source()\n        .replace(/{{title}}/gi, this.title())\n  );\n\n  //events\n  dom = document.getElementById('designer-dialog-search-modal-ok');\n  dom.addEventListener('click', function click(event) {\n    this.ok();\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-search-result');\n  dom.addEventListener('click', function click(event) {\n    this.hide();\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-input-search');\n  dom.addEventListener('keyup', function keyup(event) {\n    var currentSelection = 0;\n    \n    switch (true) {\n      case event.keyCode === 37:\n      case event.keyCode === 39:\n        event.stopPropagation();\n        event.preventDefault();\n        return false;\n        break;\n      case event.keyCode === 13:\n        if (this.currentSelection() > -1) {\n          document.getElementsByClassName('list-group-item active')[0].click();\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        return false;\n        break;\n      case event.keyCode === 38:\n        currentSelection = this.currentSelection();\n        if (currentSelection > 0) {\n          $($('.list-group a')[currentSelection]).removeClass('active');\n          currentSelection = currentSelection - 1;\n          this.currentSelection(currentSelection);\n          $($('.list-group a')[currentSelection]).addClass('active');\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        return false;\n        break;\n      case event.keyCode === 40:\n        currentSelection = this.currentSelection();\n        if (currentSelection < this.nbResult() -1) {\n          $($('.list-group a')[currentSelection]).removeClass('active');\n          currentSelection = currentSelection + 1;\n          this.currentSelection(currentSelection);\n          $($('.list-group a')[currentSelection]).addClass('active');\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        return false;\n        break;\n      default:\n        this.filter(event.target.value);\n        break;\n    }\n  }.bind(this));\n\n  dom.addEventListener('keydown', function keydown(event) {\n    if (event.keyCode === 13 || event.keyCode === 38 || event.keyCode === 40) {\n      event.stopPropagation();\n      event.preventDefault();\n      return false;\n    }\n  }.bind(this));\n\n  // focus\n  $('#designer-dialog-search-modal').on('shown.bs.modal', function modal() {\n    $('#designer-dialog-input-search').focus();\n  });\n  \n  $('#designer-dialog-search-result-area').hide();\n}",
      "useCoreAPI": false,
      "core": false
    },
    "i1f2a414c501ccef": {
      "_id": "i1f2a414c501ccef",
      "component": "DialogSearch",
      "state": "show",
      "action": "function show() { \n  $('#designer-dialog-search-modal').modal('show');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "m113f71766a1a35a": {
      "_id": "m113f71766a1a35a",
      "component": "DialogSearch",
      "state": "hide",
      "action": "function hide() { \n  $('#designer-dialog-search-modal').modal('hide');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "a1782f14fca18eba": {
      "_id": "a1782f14fca18eba",
      "component": "DialogExtension",
      "state": "show",
      "action": "function show() { \n  $('#designer-dialog-extension-modal').modal('show');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "r1a97f1be45125db": {
      "_id": "r1a97f1be45125db",
      "component": "DialogExtension",
      "state": "hide",
      "action": "function hide() { \n  $('#designer-dialog-extension-modal').modal('hide');\n}",
      "useCoreAPI": false,
      "core": false
    },
    "y1cef2194f4195d5": {
      "_id": "y1cef2194f4195d5",
      "component": "DialogExtension",
      "state": "init",
      "action": "function init(conf) { \n\tvar html = '',\n      dom = null,\n      extensions = [],\n      extensionsUninstalled = [],\n      extension = '',\n      listExtensions = '',\n      listExtensionsUninstalled ='',\n      systems = null,\n      sys = '',\n      system = null,\n      length = 0,\n      i = 0,\n      that = this,\n      nbExtensionToAdd = 0,\n      nbExtensionUninstalled = 0,\n      nbExtensionInstalled = 0,\n      isSystemContainsExtension = false;\n\n  $('.modal-backdrop').remove();\n  $('#designer-dialog').empty();\n  \n  // init extensions list\n  extensions = this.require('db').collections().Extension.find({\n    'installed': true\n  });\n  \n  nbExtensionInstalled = extensions.length;\n  for (i = 0; i < nbExtensionInstalled; i++) {\n    extension = this.require(extensions[i]._id);\n\n    listExtensions = listExtensions + '<a class=\"list-group-item\" id=\"designer-dialog-extension-modal-extensions-' + extension.id() + '\">' +\n      '<h4 class=\"list-group-item-heading\">' + extension.source().name + '</h4>' +\n      '<p class=\"list-group-item-text\">v' + extension.source().version + '</p>' +\n      '</a>';\n  }\n  if (nbExtensionInstalled === 0) {\n    listExtensions = '<a class=\"list-group-item\"><h4 class=\"list-group-item-heading\">No extension found</h4></a>';\n  }\n  \n  // init extensions uninstalled list\n  extensionsUninstalled = this.require('db').collections().Extension.find({\n    'installed': false,\n    'isCore': true\n  });\n  \n  nbExtensionUninstalled = extensionsUninstalled.length;\n  for (i = 0; i < nbExtensionUninstalled; i++) {\n    extension = this.require(extensionsUninstalled[i]._id);\n\n    listExtensionsUninstalled = listExtensionsUninstalled + '<a class=\"list-group-item\" id=\"designer-dialog-extension-modal-uninstalled-extensions-' + extension.id() + '\">' +\n      '<h4 class=\"list-group-item-heading\">' + extension.source().name + '</h4>' +\n      '<p class=\"list-group-item-text\">v' + extension.source().version + '</p>' +\n      '</a>';\n  }\n  if (nbExtensionUninstalled === 0) {\n    listExtensionsUninstalled = '<a class=\"list-group-item\"><h4 class=\"list-group-item-heading\">No extension found</h4></a>';\n  }\n\n  // init systems list\n  systems = this.require('storage').get('system-designer-systems');\n  if (systems) {\n    systemIds = systems.systems;\n    nbExtensionToAdd = systemIds.length;\n  }\n\n  for (i = 0; i < nbExtensionToAdd; i++) {\n    system = this.require('storage').get(systemIds[i]);\n \n    if (system && system.name.indexOf('extension-') !== -1) {\n      isSystemContainsExtension = true;\n      sys = sys + '<a class=\"list-group-item\" id=\"designer-dialog-extension-modal-systems-' + system._id + '\">' +\n          '<h4 class=\"list-group-item-heading\">' + system.name + '</h4>' +\n          '<p class=\"list-group-item-text\">v' + system.version + '</p>' +\n          '</a>';\n    }\n  }\n  \n  if (nbExtensionToAdd === 0) {\n    sys = '<a class=\"list-group-item\"><h4 class=\"list-group-item-heading\">No extension found</h4></a>';\n  }\n\n  html = this.require('dialog-modal-extension.html');\n  document.querySelector('#designer-dialog').insertAdjacentHTML('afterbegin',\n    html.source()\n     .replace(/{{title}}/gi, this.title())\n        .replace(/{{extensions}}/gi, listExtensions)\n        .replace(/{{uninstalled_extensions}}/gi, listExtensionsUninstalled)\n        .replace(/{{systems}}/gi, sys)\n  );\n  \n  // systems events  \n  var callbackSystemEvent = function cbSystemEvent(event) {\n    var id = '',\n        systems = null,\n        length = 0,\n        i = 0;\n\n    if ($(this).hasClass('active')) {\n      $(this).removeClass('active');\n      that.data(null);\n    } else {\n      id = this.getAttribute('id').replace('designer-dialog-extension-modal-systems-', '');\n\n      that.data(that.require('storage').get(id));\n\n      // remove old active\n      systems = document.getElementById('designer-dialog-extension-modal-systems');\n\n      length = systems.children.length;\n      for (i = 0; i < length; i++) {\n        $(systems.children[i]).removeClass('active');\n      }\n\n      // add current active\n      $(this).addClass('active');\n    }\n  };\n\n  for (i = 0; i < nbExtensionToAdd; i++) {\n    system = this.require('storage').get(systemIds[i]);\n\n    if (system && system.name.indexOf('extension-') !== -1) {\n      dom = document.getElementById('designer-dialog-extension-modal-systems-' + system._id);\n      dom.addEventListener('click', callbackSystemEvent);\n    }\n  }\n  \n  // uninstalled extensions events  \n  var callbackEvent = function cbEvent(event) {\n    var id = '',\n        libraries = null,\n        length = 0,\n        i = 0;\n\n    if ($(this).hasClass('active')) {\n      $(this).removeClass('active');\n      that.data(null);\n    } else {\n      id = this.getAttribute('id').replace('designer-dialog-extension-modal-uninstalled-extensions-', '');\n\n      that.data(that.require(id));\n\n      // remove old active\n      libraries = document.getElementById('designer-dialog-extension-modal-uninstalled-extensions');\n\n      length = libraries.children.length;\n      for (i = 0; i < length; i++) {\n        $(libraries.children[i]).removeClass('active');\n      }\n\n      // add current active\n      $(this).addClass('active');\n    }\n  };\n  \n  for (i = 0; i < nbExtensionUninstalled; i++) {\n    extension = this.require(extensionsUninstalled[i]._id);\n\n    dom = document.getElementById('designer-dialog-extension-modal-uninstalled-extensions-' + extension.id());\n    dom.addEventListener('click', callbackEvent);\n  }\n\n  // extensions events  \n  var callbackEvent = function cbEvent(event) {\n    var id = '',\n        libraries = null,\n        length = 0,\n        i = 0;\n\n    if ($(this).hasClass('active')) {\n      $(this).removeClass('active');\n      that.data(null);\n    } else {\n      id = this.getAttribute('id').replace('designer-dialog-extension-modal-extensions-', '');\n\n      that.data(that.require(id));\n\n      // remove old active\n      libraries = document.getElementById('designer-dialog-extension-modal-extensions');\n\n      length = libraries.children.length;\n      for (i = 0; i < length; i++) {\n        $(libraries.children[i]).removeClass('active');\n      }\n\n      // add current active\n      $(this).addClass('active');\n    }\n  };\n  \n  for (i = 0; i < nbExtensionInstalled; i++) {\n    extension = this.require(extensions[i]._id);\n\n    dom = document.getElementById('designer-dialog-extension-modal-extensions-' + extension.id());\n    dom.addEventListener('click', callbackEvent);\n  }\n  \n  dom = document.getElementById('designer-dialog-extension-modal-action-remove');\n  dom.addEventListener('click', function click(event) {\n    $('#designer-dialog-extension-modal-extensions-area').show();\n    $('#designer-dialog-extension-modal-systems-area').hide();\n    $('#designer-dialog-extension-modal-unistalled-extensions-area').hide();\n    $('#designer-dialog-extension-modal-remove').show();\n    $('#designer-dialog-extension-modal-add').hide();\n  }.bind(this));\n\n  dom = document.getElementById('designer-dialog-extension-modal-action-add');\n  dom.addEventListener('click', function click(event) {\n    $('#designer-dialog-extension-modal-extensions-area').hide();\n    if (isSystemContainsExtension) {\n      $('#designer-dialog-extension-modal-systems-area').show();\n    }\n    $('#designer-dialog-extension-modal-unistalled-extensions-area').show();\n    $('#designer-dialog-extension-modal-remove').hide();\n    $('#designer-dialog-extension-modal-add').show();\n  }.bind(this));\n  \n  // events\n  dom = document.getElementById('designer-dialog-extension-modal-cancel');\n  dom.addEventListener('click', function click(event) {\n    this.cancel();\n  }.bind(this));\n  \n  dom = document.getElementById('designer-dialog-extension-modal-add');\n  dom.addEventListener('click', function click(event) {\n    this.add();\n  }.bind(this));\n  \n  dom = document.getElementById('designer-dialog-extension-modal-remove');\n  dom.addEventListener('click', function click(event) {\n    this.remove();\n  }.bind(this));\n  \n  if (isSystemContainsExtension) {\n    $('#designer-dialog-extension-modal-systems-area').show();\n  }\n}",
      "useCoreAPI": false,
      "core": false
    },
    "u11da5146311bf9b": {
      "_id": "u11da5146311bf9b",
      "component": "DialogExtension",
      "state": "add",
      "action": "function add() { \n\tvar Extension = this.require('Extension'),\n\tdata = this.data(),\n\tsystem = {},\n\textension = null,\n\textensions = [],\n\textensionToSave = {\n\t  extensions: []\n\t},\n\tcleanJson = '',\n\treg = null,\n\tupdated = false,\n\tfromExtension = false;\n\t\n\tif (data.isCore) {\n\t  fromExtension = true;\n\t  system = data.source();\n\t} else {\n\t  system = this.data();\n\t}\n\n\tif (system && Object.keys(system).length) {\n\t  \n\t  if (!fromExtension) {\n  \t  // update or add extension\n    \textensions = this.require('db').collections().Extension.find();\n  \n      extensions.forEach(function forEach(extension) {\n        if (extension.source._id === system._id) {\n          extension.source = system;\n          updated = true;\n        }\n      });\n  \n      if (!updated) {\n      \tnew Extension({\n      \t  'source': system,\n      \t  'installed': true\n      \t});\n      }\n\t  } else {\n\t    this.data().installed(true);\n\t  }\n    \n    // save\n    extensions = this.require('db').collections().Extension.find();\n  \t\n  \textensionToSave.extensions = extensions.map(function map(extension) {\n  \t  var clean = JSON.parse(JSON.stringify(extension));\n  \t  delete clean.classInfo;\n  \t  return clean;\n  \t});\n    \n    this.require('storage').set('system-designer-extensions', extensionToSave);\n  \t\n  \t// install extension\n  \t// TODO put that in function\n  \tif (updated) {\n  \t  this.require('runtime').uninstall('ext_' + system._id)\n  \t}\n  \t\n    cleanJson = JSON.stringify(system);\n    reg = new RegExp(system._id, 'g');\n    cleanJson = cleanJson.replace(reg, 'ext_' + system._id);\n    system = JSON.parse(cleanJson);\n        \n  \tthis.require('runtime').install(system);\n  \tthis.require('menubar').render();\n  \tthis.require('toolbar').render();\n  \t\n  \tthis.hide();\n  \tthis.require('message').success('The extension has been added.');\n\t}\n}",
      "useCoreAPI": false,
      "core": false
    },
    "h125f41b82b19da2": {
      "_id": "h125f41b82b19da2",
      "component": "DialogExtension",
      "state": "remove",
      "action": "function remove() { \n\tvar extension = this.data(),\n\textensions = [],\n\textensionToSave = {\n\t  extensions: []\n\t};\n\t\n\tif (extension && Object.keys(extension).length) {\n  \t// TODO put that in function\n  \tthis.require('runtime').uninstall('ext_' + extension.source()._id);\n  \tthis.require('menubar').render();\n  \tthis.require('toolbar').render();\n  \t\n  \tif (extension.isCore()) {\n  \t  extension.installed(false);\n  \t} else {\n  \t  extension.destroy();\n  \t}\n  \t\n  \t// extensions\n  \textensions = this.require('db').collections().Extension.find();\n  \t\n  \textensionToSave.extensions = extensions.map(function map(extension) {\n  \t  var clean = JSON.parse(JSON.stringify(extension));\n  \t  delete clean.classInfo;\n  \t  return clean;\n  \t});\n    \n    this.require('storage').set('system-designer-extensions', extensionToSave);\n  \t\n  \tthis.hide();\n  \t\n  \tthis.require('message').success('The extension has been removed.');\n\t}\n}",
      "useCoreAPI": false,
      "core": false
    },
    "w1e8901ec6f110c0": {
      "_id": "w1e8901ec6f110c0",
      "component": "DialogSearch",
      "state": "ok",
      "action": "function ok() { \n  this.hide();\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "l199a81e07b123f5": {
      "_id": "l199a81e07b123f5",
      "component": "DialogSearch",
      "state": "filter",
      "action": "function filter(value) { \n  var systemId = this.require('factory').system().id(),\n    systemName = this.require('factory').system().name(),\n    schemas = this.require('factory').system().schemas(),\n    models = this.require('factory').system().models(),\n    types = this.require('factory').system().types(),\n    behaviors = this.require('factory').system().behaviors(),\n    components = this.require('factory').system().components(),\n    collection = '',\n    id = '',\n    toSearch = '',\n    index = -1,\n    result = [],\n    nbItems = 0,\n    nbResults = 0;\n    \n  function showResult(str, index, value) {\n    var result = '',\n        length = value.length;\n    \n    result = str.substring(index - 20, index + length + 20);\n    result = result.replace(/</g,'&lt;');\n    result = result.replace(value, '<b>' + value + '</b>');\n    \n    return result;\n  }  \n  \n  function showNumberResult(search, str) {\n    var result = '',\n        cleanSearch = '',\n        reg = null,\n        nb = null;\n    \n    cleanSearch = search.replace(/\\(/g, '\\\\(');\n    cleanSearch = cleanSearch.replace(/\\)/g, '\\\\)');\n    cleanSearch = cleanSearch.replace(/\\[/g, '\\\\[');\n    cleanSearch = cleanSearch.replace(/\\]/g, '\\\\]');\n    cleanSearch = cleanSearch.replace(/\\./g, '\\\\.');\n    cleanSearch = cleanSearch.replace(/\\+/g, '\\\\+');\n    cleanSearch = cleanSearch.replace(/\\*/g, '\\\\*');\n    cleanSearch = cleanSearch.replace(/\\$/g, '\\\\\\u0024');\n    \n    reg = new RegExp(cleanSearch, 'gi');\n    nb = str.match(reg);\n    \n    if (nb && nb.length) {\n      nbItems++;\n      nbResults = nbResults + nb.length;\n      result = '<span class=\"badge\">' + nb.length + '</span>';\n    }\n    \n    return result;\n  }\n  \n  function showInfoResult() {\n    var info = '';\n    \n    if (nbResults > 1) {\n      info = 'There are ' + nbResults + ' results';\n    } else {\n      info = 'There is '+ info + nbResults + ' result';\n    }\n    \n    info = info + ' in ';\n    \n    if (nbItems > 1) {\n      info = info + nbItems + ' elements';\n    } else {\n      info = info + nbItems + ' element';\n    }\n    \n    if (nbResults > 0) {\n      $('#designer-dialog-search-result-number').text(info);\n    } else {\n      $('#designer-dialog-search-result-number').text('');\n    }\n  }\n\n  // clean\n  document.getElementById('designer-dialog-search-result').innerHTML = '';\n\n  if (value.length > 0 && value.trim() !== '') {\n\n    // schema\n    for (id in schemas) {\n      toSearch = JSON.stringify(schemas[id]);\n      index = toSearch.toLowerCase().indexOf(value.toLowerCase());\n      if (index != -1) {\n        link = '<a href=\"#' + systemId + '#schemas#' + id + '\" class=\"list-group-item\" class=\"list-group-item active\">' +\n          '<h4 class=\"list-group-item-heading\">Schema ' + schemas[id]._name + ' ' + showNumberResult(value, toSearch) + '</h4>' +\n          '<p class=\"list-group-item-text\">...' + showResult(toSearch, index, value) + '...</p>' +\n          '</a>';\n\n        result.push(link);\n      }\n    }\n\n    // model\n    for (id in models) {\n      toSearch = JSON.stringify(models[id]);\n      index = toSearch.toLowerCase().indexOf(value.toLowerCase());\n      if (index != -1) {\n        link = '<a href=\"#' + systemId + '#models#' + id + '\" class=\"list-group-item\" class=\"list-group-item active\">' +\n          '<h4 class=\"list-group-item-heading\">Model ' + models[id]._name + ' ' + showNumberResult(value, toSearch) + '</h4>' +\n          '<p class=\"list-group-item-text\">...' + showResult(toSearch, index, value) + '...</p>' +\n          '</a>';\n\n        result.push(link);\n      }\n    }\n\n    // type\n    for (id in types) {\n      toSearch = JSON.stringify(types[id]);\n      index = toSearch.toLowerCase().indexOf(value.toLowerCase());\n      if (index != -1) {\n        link = '<a href=\"#' + systemId + '#types#' + types[id].name + '\" class=\"list-group-item\" class=\"list-group-item active\">' +\n          '<h4 class=\"list-group-item-heading\">Type ' + types[id].name + ' ' + showNumberResult(value, toSearch) + '</h4>' +\n          '<p class=\"list-group-item-text\">...' + showResult(toSearch, index, value) + '...</p>' +\n          '</a>';\n\n        result.push(link);\n      }\n    }\n\n    // behavior\n    for (id in behaviors) {\n      toSearch = behaviors[id].action;\n      index = toSearch.toLowerCase().indexOf(value.toLowerCase());\n      if (index != -1) {\n        link = '<a href=\"#' + systemId + '#behaviors#' + behaviors[id].component + '#' + behaviors[id].state + '\" class=\"list-group-item\" class=\"list-group-item active\">';\n          \n        if (behaviors[id].component === systemId) {\n          link = link + '<h4 class=\"list-group-item-heading\">Behavior ' + systemName + '.' + behaviors[id].state + ' ' + showNumberResult(value, toSearch) + '</h4>';\n        } else { \n          link = link + '<h4 class=\"list-group-item-heading\">Behavior ' + behaviors[id].component + '.' + behaviors[id].state + ' ' + showNumberResult(value, toSearch) + '</h4>';\n        }\n          \n          \n          link = link + '<p class=\"list-group-item-text\">...' + showResult(toSearch, index, value) + '...</p>' +\n          '</a>';\n\n        result.push(link);\n      }\n    }\n\n    // components\n    for (collection in components) {\n      for (id in components[collection]) {\n        toSearch = JSON.stringify(components[collection][id]);\n        index = toSearch.toLowerCase().indexOf(value.toLowerCase());\n        if (index != -1) {\n          link = '<a href=\"#' + systemId + '#components#' + collection + '#' + id + '\" class=\"list-group-item\" class=\"list-group-item active\">' +\n            '<h4 class=\"list-group-item-heading\">Component ' + components[collection][id]._id + ' ' + showNumberResult(value, toSearch) + '</h4>' +\n            '<p class=\"list-group-item-text\">...' + showResult(toSearch, index, value) + '...</p>' +\n            '</a>';\n\n          result.push(link);\n        }\n      }\n    }\n    \n    showInfoResult();\n    \n    if (result.length === 0) {\n      this.nbResult(0);\n      result.push('<a class=\"list-group-item\"><h4 class=\"list-group-item-heading\">There is no result for your search</h4></a>');\n    } else {\n      this.nbResult(result.length);\n    }\n\n    // result\n    document.getElementById('designer-dialog-search-result').innerHTML = result.join(' ');\n    \n    if (this.nbResult() > 0) {\n      $('.list-group a:first').addClass('active');\n      this.currentSelection(0);\n    } else {\n      this.currentSelection(-1);\n    }\n    \n    $('#designer-dialog-search-result-area').show();\n  } else {\n    $('#designer-dialog-search-result-area').hide();\n  }\n}",
      "useCoreAPI": false,
      "core": false
    },
    "q1767e1d52d10d30": {
      "_id": "q1767e1d52d10d30",
      "component": "DialogCommand",
      "state": "init",
      "action": "function init(conf) { \n  var html = '',\n      dom = null,\n      system = this.require('factory').system();\n\n  $('#designer-dialog').empty();\n\n  html = this.require('dialog-modal-command.html');\n  document.querySelector('#designer-dialog').insertAdjacentHTML('afterbegin',html.source());\n\n  dom = document.getElementById('designer-dialog-input-command');\n  dom.addEventListener('keyup', function keyup(event) {\n    var currentSelection = 0;\n    \n    switch (true) {\n      case event.keyCode === 37:\n      case event.keyCode === 39:\n        event.stopPropagation();\n        event.preventDefault();\n        return false;\n        break;\n      case event.keyCode === 13:\n        if (this.currentSelection() > -1) {\n          $($('.list-group a')[this.currentSelection()]).click();\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        return false;\n        break;\n      case event.keyCode === 38:\n        currentSelection = this.currentSelection();\n        if (currentSelection > 0) {\n          $($('.list-group a')[currentSelection]).removeClass('active');\n          currentSelection = currentSelection - 1;\n          this.currentSelection(currentSelection);\n          $($('.list-group a')[currentSelection]).addClass('active');\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        return false;\n        break;\n      case event.keyCode === 40:\n        currentSelection = this.currentSelection();\n        if (currentSelection < this.nbResult() -1) {\n          $($('.list-group a')[currentSelection]).removeClass('active');\n          currentSelection = currentSelection + 1;\n          this.currentSelection(currentSelection);\n          $($('.list-group a')[currentSelection]).addClass('active');\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        return false;\n        break;\n      default:\n        this.filter(event.target.value);\n        break;\n    }\n  }.bind(this));\n\n  dom.addEventListener('keydown', function keydown(event) {\n    if (event.keyCode === 13 || event.keyCode === 38 || event.keyCode === 40) {\n      event.stopPropagation();\n      event.preventDefault();\n      return false;\n    }\n  }.bind(this));\n\n  // focus\n  $('#designer-dialog-command-modal').on('shown.bs.modal', function modal() {\n    $('#designer-dialog-input-command').focus();\n  });\n  \n  $('#designer-dialog-command-result-area').hide();\n}",
      "useCoreAPI": false,
      "core": false
    },
    "v1b469169cd19052": {
      "_id": "v1b469169cd19052",
      "component": "DialogCommand",
      "state": "filter",
      "action": "function filter(value) { \n  var systemId = this.require('factory').system().id(),\n    systemName = this.require('factory').system().name(),\n    schemas = this.require('factory').system().schemas(),\n    models = this.require('factory').system().models(),\n    types = this.require('factory').system().types(),\n    behaviors = this.require('factory').system().behaviors(),\n    components = this.require('factory').system().components(),\n    collection = '',\n    id = '',\n    toSearch = '',\n    index = -1,\n    result = [];\n    \n  // clean\n  document.getElementById('designer-dialog-command-result').innerHTML = '';\n  \n  function hasValues(val, str) {\n    var result = true,\n        values = [];\n        \n    values = val.split(' ');\n    \n    values.forEach(function (value) {\n      if (str.toLowerCase().indexOf(value.toLowerCase()) === -1) {\n        result = false;\n      }\n    });\n    \n    return result;\n  }\n\n  if (value.length > 0 && value.trim() !== '') {\n\n    // schema\n    for (id in schemas) {\n      if (hasValues(value, 'Schema ' + schemas[id]._name)) {\n        link = '<a class=\"list-group-item\" class=\"list-group-item active\" onclick=\"$(\\'#designer-dialog-command-modal\\').modal(\\'hide\\'); runtime.require(\\'designer\\').open(\\'schema.html#' + id + '#' + systemId + '\\', \\'' + id + '\\');\">' +\n          '<h4 class=\"list-group-item-heading\">Schema ' + schemas[id]._name + '</h4>' +\n          '</a>';\n\n        result.push(link);\n      }\n    }\n\n    // model\n    for (id in models) {\n      if (hasValues(value, 'Model ' + models[id]._name)) {\n        link = '<a class=\"list-group-item\" class=\"list-group-item active\" onclick=\"$(\\'#designer-dialog-command-modal\\').modal(\\'hide\\'); runtime.require(\\'designer\\').open(\\'model.html#' + id + '#' + systemId + '\\', \\'' + id + '\\');\">' +\n          '<h4 class=\"list-group-item-heading\">Model ' + models[id]._name + '</h4>' +\n          '</a>';\n\n        result.push(link);\n      }\n    }\n\n    // type\n    for (id in types) {\n      if (hasValues(value, 'Type ' + types[id].name)) {\n        link = '<a class=\"list-group-item\" class=\"list-group-item active\" onclick=\"$(\\'#designer-dialog-command-modal\\').modal(\\'hide\\'); runtime.require(\\'designer\\').open(\\'type.html#' + id + '#' + systemId + '\\', \\'' + id + '\\');\">' +\n          '<h4 class=\"list-group-item-heading\">Type ' + types[id].name + '</h4>' +\n          '</a>';\n\n        result.push(link);\n      }\n    }\n\n    // behavior\n    for (id in behaviors) {\n      var fullName = behaviors[id].component + '.' + behaviors[id].state;\n      if (behaviors[id].component === systemId) {\n        fullName = systemName + '.' + behaviors[id].state;\n      }\n      if (hasValues(value, 'Behavior ' + fullName)) {\n        link = '<a class=\"list-group-item\" class=\"list-group-item active\" onclick=\"$(\\'#designer-dialog-command-modal\\').modal(\\'hide\\'); runtime.require(\\'designer\\').open(\\'behavior.html#' + id + '#' + systemId + '\\', \\'' + id + '\\');\">';\n          \n        if (behaviors[id].component === systemId) {\n          link = link + '<h4 class=\"list-group-item-heading\">Behavior ' + systemName + '.' + behaviors[id].state + '</h4>';\n        } else { \n          link = link + '<h4 class=\"list-group-item-heading\">Behavior ' + behaviors[id].component + '.' + behaviors[id].state + '</h4>';\n        }\n        '</a>';\n\n        result.push(link);\n      }\n    }\n\n    // components\n    for (collection in components) {\n      for (id in components[collection]) {\n        if (hasValues(value, 'Component' + components[collection][id]._id)) {\n          link = '<a class=\"list-group-item\" class=\"list-group-item active\" onclick=\"$(\\'#designer-dialog-command-modal\\').modal(\\'hide\\'); runtime.require(\\'designer\\').open(\\'component.html#' + id + '#' + encodeURIComponent(collection) + '#' + encodeURIComponent(systemId) + '\\', \\'' + id + '\\');\">' +\n            '<h4 class=\"list-group-item-heading\">Component ' + components[collection][id]._id + '</h4>' +\n            '</a>';\n\n          result.push(link);\n        }\n      }\n    }\n    \n    if (result.length === 0) {\n      this.nbResult(0);\n      result.push('<a class=\"list-group-item\"><h4 class=\"list-group-item-heading\">There is no result</h4></a>');\n    } else {\n      this.nbResult(result.length);\n    }\n\n    // result\n    document.getElementById('designer-dialog-command-result').innerHTML = result.join(' ');\n    \n    if (this.nbResult() > 0) {\n      $('.list-group a:first').addClass('active');\n      this.currentSelection(0);\n    } else {\n      this.currentSelection(-1);\n    }\n    \n    $('#designer-dialog-command-result-area').show();\n  } else {\n    $('#designer-dialog-command-result-area').hide();\n  }\n}",
      "useCoreAPI": false,
      "core": false
    },
    "v1626c1b34014385": {
      "_id": "v1626c1b34014385",
      "component": "DialogCommand",
      "state": "show",
      "action": "function show() { \n $('#designer-dialog-command-modal').modal('show');\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "a10153101bc1a2ef": {
      "_id": "a10153101bc1a2ef",
      "component": "DialogCommand",
      "state": "hide",
      "action": "function hide() { \n  $('#designer-dialog-command-modal').modal('hide');\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "o1007d12b0a1a3e3": {
      "_id": "o1007d12b0a1a3e3",
      "component": "DialogDelete",
      "state": "init",
      "action": "function init(conf) { \n  var html = '',\n      dom = null;\n\n  // empty area\n  $('#designer-dialog').empty();\n\n  // render\n  html = this.require('dialog-modal-delete.html');\n  document.querySelector('#designer-dialog').insertAdjacentHTML('afterbegin',\n    html.source()\n      .replace(/{{title}}/gi, this.title())\n      .replace(/{{message}}/gi, this.message())\n  );\n\n  // events\n  dom = document.getElementById('designer-dialog-delete-cancel');\n  dom.addEventListener('click', function click(event) {\n    this.cancel();\n  }.bind(this));\n  \n  dom = document.getElementById('designer-dialog-delete-ok');\n  dom.addEventListener('click', function click(event) {\n    this.ok();\n  }.bind(this));\t\t\n  \n  // show\n  $('#designer-dialog-delete-modal').modal('show');\t\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "b190621a3cf139b0": {
      "_id": "b190621a3cf139b0",
      "component": "DialogDelete",
      "state": "hide",
      "action": "function hide() { \n  $('#designer-dialog-delete-modal').modal('hide');\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "z19b6c1e87e10065": {
      "_id": "z19b6c1e87e10065",
      "component": "DialogDelete",
      "state": "show",
      "action": "function show() { \n  $('#designer-dialog-delete-modal').modal('show');\t\n}",
      "useCoreAPI": false,
      "core": false
    },
    "a110631fc9a10b17": {
      "_id": "a110631fc9a10b17",
      "component": "DialogDelete",
      "state": "cancel",
      "action": "function cancel() { \n  this.hide();\t\n}",
      "useCoreAPI": false,
      "core": false
    }
  },
  "types": {},
  "components": {},
  "_id": "j14988167501fe95"
}
